var vueFlowCore=function(W,r){"use strict";var Mu=Object.defineProperty;var Bu=(W,r,_e)=>r in W?Mu(W,r,{enumerable:!0,configurable:!0,writable:!0,value:_e}):W[r]=_e;var Zt=(W,r,_e)=>(Bu(W,typeof r!="symbol"?r+"":r,_e),_e);var _e;const Zn=typeof window<"u",Hi=e=>typeof e<"u",Yi=e=>typeof e=="boolean",pe=e=>typeof e=="function",Ce=e=>typeof e=="number",be=e=>typeof e=="string",Xi=()=>{};Zn&&((_e=window==null?void 0:window.navigator)==null?void 0:_e.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Pe(e){return typeof e=="function"?e():r.unref(e)}function Zi(e,t){function n(...o){e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})}return n}const Kn=e=>e();function Ki(e=Kn){const t=r.ref(!0);function n(){t.value=!1}function o(){t.value=!0}return{isActive:t,pause:n,resume:o,eventFilter:(...a)=>{t.value&&e(...a)}}}function Wn(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function Wi(e){return e}function Gn(e,t){let n,o,i;const a=r.ref(!0),s=()=>{a.value=!0,i()};r.watch(e,s,{flush:"sync"});const l=pe(t)?t:t.get,c=pe(t)?void 0:t.set,u=r.customRef((d,h)=>(o=d,i=h,{get(){return a.value&&(n=l(),a.value=!1),o(),n},set(f){c==null||c(f)}}));return Object.isExtensible(u)&&(u.trigger=s),u}function Y(){const e=[],t=i=>{const a=e.indexOf(i);a!==-1&&e.splice(a,1)};return{on:i=>(e.push(i),{off:()=>t(i)}),off:t,trigger:i=>{e.forEach(a=>a(i))}}}function He(e){return r.getCurrentScope()?(r.onScopeDispose(e),!0):!1}function Gi(e,t=!0){r.getCurrentInstance()?r.onMounted(e):t?e():r.nextTick(e)}function Kt(e,t=!1){function n(h,{flush:f="sync",deep:_=!1,timeout:m,throwOnTimeout:g}={}){let b=null;const E=[new Promise(S=>{b=r.watch(e,w=>{h(w)!==t&&(b==null||b(),S(w))},{flush:f,deep:_,immediate:!0})})];return m!=null&&E.push(Wn(m,g).then(()=>Pe(e)).finally(()=>b==null?void 0:b())),Promise.race(E)}function o(h,f){if(!r.isRef(h))return n(w=>w===h,f);const{flush:_="sync",deep:m=!1,timeout:g,throwOnTimeout:b}=f!=null?f:{};let p=null;const S=[new Promise(w=>{p=r.watch([e,h],([M,y])=>{t!==(M===y)&&(p==null||p(),w(M))},{flush:_,deep:m,immediate:!0})})];return g!=null&&S.push(Wn(g,b).then(()=>Pe(e)).finally(()=>(p==null||p(),Pe(e)))),Promise.race(S)}function i(h){return n(f=>Boolean(f),h)}function a(h){return o(null,h)}function s(h){return o(void 0,h)}function l(h){return n(Number.isNaN,h)}function c(h,f){return n(_=>{const m=Array.from(_);return m.includes(h)||m.includes(Pe(h))},f)}function u(h){return d(1,h)}function d(h=1,f){let _=-1;return n(()=>(_+=1,_>=h),f)}return Array.isArray(Pe(e))?{toMatch:n,toContains:c,changed:u,changedTimes:d,get not(){return Kt(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:l,toBeUndefined:s,changed:u,changedTimes:d,get not(){return Kt(e,!t)}}}function $e(e){return Kt(e)}var Un=Object.getOwnPropertySymbols,Ui=Object.prototype.hasOwnProperty,qi=Object.prototype.propertyIsEnumerable,ji=(e,t)=>{var n={};for(var o in e)Ui.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Un)for(var o of Un(e))t.indexOf(o)<0&&qi.call(e,o)&&(n[o]=e[o]);return n};function Qi(e,t,n={}){const o=n,{eventFilter:i=Kn}=o,a=ji(o,["eventFilter"]);return r.watch(e,Zi(i,t),a)}var Ji=Object.defineProperty,er=Object.defineProperties,tr=Object.getOwnPropertyDescriptors,ut=Object.getOwnPropertySymbols,qn=Object.prototype.hasOwnProperty,jn=Object.prototype.propertyIsEnumerable,Qn=(e,t,n)=>t in e?Ji(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nr=(e,t)=>{for(var n in t||(t={}))qn.call(t,n)&&Qn(e,n,t[n]);if(ut)for(var n of ut(t))jn.call(t,n)&&Qn(e,n,t[n]);return e},or=(e,t)=>er(e,tr(t)),ir=(e,t)=>{var n={};for(var o in e)qn.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&ut)for(var o of ut(e))t.indexOf(o)<0&&jn.call(e,o)&&(n[o]=e[o]);return n};function Oe(e,t,n={}){const o=n,{eventFilter:i}=o,a=ir(o,["eventFilter"]),{eventFilter:s,pause:l,resume:c,isActive:u}=Ki(i);return{stop:Qi(e,t,or(nr({},a),{eventFilter:s})),pause:l,resume:c,isActive:u}}function Jn(e){var t;const n=Pe(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Wt=Zn?window:void 0;function Gt(...e){let t,n,o,i;if(be(e[0])||Array.isArray(e[0])?([n,o,i]=e,t=Wt):[t,n,o,i]=e,!t)return Xi;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],s=()=>{a.forEach(d=>d()),a.length=0},l=(d,h,f)=>(d.addEventListener(h,f,i),()=>d.removeEventListener(h,f,i)),c=r.watch(()=>Jn(t),d=>{s(),d&&a.push(...n.flatMap(h=>o.map(f=>l(d,h,f))))},{immediate:!0,flush:"post"}),u=()=>{c(),s()};return He(u),u}const rr=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function eo(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Wt,eventName:a="keydown",passive:s=!1}=o,l=rr(t);return Gt(i,a,u=>{l(u)&&n(u)},s)}function ar(e,t=!1){const n=r.ref(),o=()=>n.value=Boolean(e());return o(),Gi(o,t),n}function sr(e){return JSON.parse(JSON.stringify(e))}const Ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qt="__vueuse_ssr_handlers__";Ut[qt]=Ut[qt]||{},Ut[qt];var to=Object.getOwnPropertySymbols,lr=Object.prototype.hasOwnProperty,cr=Object.prototype.propertyIsEnumerable,ur=(e,t)=>{var n={};for(var o in e)lr.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&to)for(var o of to(e))t.indexOf(o)<0&&cr.call(e,o)&&(n[o]=e[o]);return n};function dr(e,t,n={}){const o=n,{window:i=Wt}=o,a=ur(o,["window"]);let s;const l=ar(()=>i&&"ResizeObserver"in i),c=()=>{s&&(s.disconnect(),s=void 0)},u=r.watch(()=>Jn(e),h=>{c(),l.value&&i&&h&&(s=new ResizeObserver(t),s.observe(h,a))},{immediate:!0,flush:"post"}),d=()=>{c(),u()};return He(d),{isSupported:l,stop:d}}var no;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(no||(no={}));var fr=Object.defineProperty,oo=Object.getOwnPropertySymbols,hr=Object.prototype.hasOwnProperty,gr=Object.prototype.propertyIsEnumerable,io=(e,t,n)=>t in e?fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mr=(e,t)=>{for(var n in t||(t={}))hr.call(t,n)&&io(e,n,t[n]);if(oo)for(var n of oo(t))gr.call(t,n)&&io(e,n,t[n]);return e};mr({linear:Wi},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function Ye(e,t,n,o={}){var i,a,s;const{clone:l=!1,passive:c=!1,eventName:u,deep:d=!1,defaultValue:h}=o,f=r.getCurrentInstance(),_=n||(f==null?void 0:f.emit)||((i=f==null?void 0:f.$emit)==null?void 0:i.bind(f))||((s=(a=f==null?void 0:f.proxy)==null?void 0:a.$emit)==null?void 0:s.bind(f==null?void 0:f.proxy));let m=u;t||(t="modelValue"),m=u||m||`update:${t.toString()}`;const g=p=>l?pe(l)?l(p):sr(p):p,b=()=>Hi(e[t])?g(e[t]):h;if(c){const p=b(),E=r.ref(p);return r.watch(()=>e[t],S=>E.value=g(S)),r.watch(E,S=>{(S!==e[t]||d)&&_(m,S)},{deep:d}),E}else return r.computed({get(){return b()},set(p){_(m,p)}})}const pr=()=>({edgesChange:Y(),nodesChange:Y(),nodeDoubleClick:Y(),nodeClick:Y(),nodeMouseEnter:Y(),nodeMouseMove:Y(),nodeMouseLeave:Y(),nodeContextMenu:Y(),nodeDragStart:Y(),nodeDrag:Y(),nodeDragStop:Y(),nodesInitialized:Y(),miniMapNodeClick:Y(),miniMapNodeDoubleClick:Y(),miniMapNodeMouseEnter:Y(),miniMapNodeMouseMove:Y(),miniMapNodeMouseLeave:Y(),connect:Y(),connectStart:Y(),connectEnd:Y(),paneReady:Y(),move:Y(),moveStart:Y(),moveEnd:Y(),selectionDragStart:Y(),selectionDrag:Y(),selectionDragStop:Y(),selectionContextMenu:Y(),selectionStart:Y(),selectionEnd:Y(),viewportChangeStart:Y(),viewportChange:Y(),viewportChangeEnd:Y(),paneScroll:Y(),paneClick:Y(),paneContextMenu:Y(),paneMouseEnter:Y(),paneMouseMove:Y(),paneMouseLeave:Y(),edgeContextMenu:Y(),edgeMouseEnter:Y(),edgeMouseMove:Y(),edgeMouseLeave:Y(),edgeDoubleClick:Y(),edgeClick:Y(),edgeUpdateStart:Y(),edgeUpdate:Y(),edgeUpdateEnd:Y(),updateNodeInternals:Y()});function yr(e,t){r.onBeforeMount(()=>{for(const[n,o]of Object.entries(t.value)){const i=a=>{e(n,a)};o.on(i),He(()=>{o.off(i)})}})}const vr=["production","prod"],ae=(e,...t)=>{vr.includes(process.env.NODE_ENV||"")||console.warn(`[Vue Flow]: ${e}`,...t)},Xe=()=>typeof window<"u"?window:{chrome:!1},ro=e=>({...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}),jt=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},dt=e=>({width:e.offsetWidth,height:e.offsetHeight}),ft=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ao=(e,t)=>({x:ft(e.x,t[0][0],t[1][0]),y:ft(e.y,t[0][1],t[1][1])}),Qt=e=>{const t=e.getRootNode(),n=Xe();return"elementFromPoint"in t?t:n.document},fe=e=>e&&"id"in e&&"source"in e&&"target"in e,Jt=e=>fe(e)&&"sourceNode"in e&&"targetNode"in e,ht=e=>e&&"id"in e&&!fe(e),Ee=e=>ht(e)&&"computedPosition"in e,wr=e=>!!e.width&&!!e.height&&!!e.x&&!!e.y,xr=(e,t,n)=>{var i;let o=n;return Ee(e)||(o={type:(i=e.type)!=null?i:"default",dimensions:r.markRaw({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:r.markRaw({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,...n,data:ie(e.data)?e.data:{},events:r.markRaw(ie(e.events)?e.events:{})}),{...o,...e,id:e.id.toString()}},en=(e,t)=>{var i,a,s,l,c;const n=ie(e.events)?e.events:(t==null?void 0:t.events)&&ie(t==null?void 0:t.events)?t==null?void 0:t.events:{},o=ie(e.data)?e.data:(t==null?void 0:t.data)&&ie(t==null?void 0:t.data)?t==null?void 0:t.data:{};return t=Jt(e)?t:{...t,sourceHandle:(e.sourceHandle?e.sourceHandle.toString():void 0)||(t==null?void 0:t.sourceHandle),targetHandle:(e.targetHandle?e.targetHandle.toString():void 0)||(t==null?void 0:t.targetHandle),type:(a=(i=e.type)!=null?i:t==null?void 0:t.type)!=null?a:"default",source:e.source.toString()||(t==null?void 0:t.source),target:e.target.toString()||(t==null?void 0:t.target),z:t==null?void 0:t.z,sourceX:t==null?void 0:t.sourceX,sourceY:t==null?void 0:t.sourceY,targetX:t==null?void 0:t.targetX,targetY:t==null?void 0:t.targetY,updatable:(s=e.updatable)!=null?s:t==null?void 0:t.updatable,selectable:(l=e.selectable)!=null?l:t==null?void 0:t.selectable,focusable:(c=e.focusable)!=null?c:t==null?void 0:t.focusable,data:o,events:r.markRaw(n),label:(e.label&&!be(e.label)?r.markRaw(e.label):e.label)||(t==null?void 0:t.label),interactionWidth:e.interactionWidth||(t==null?void 0:t.interactionWidth)},Object.assign({id:e.id.toString()},e,t)},so=(e,t,n)=>{if(!ht(e))return[];const o=n==="source"?"target":"source",i=t.filter(a=>fe(a)&&a[o]===e.id).map(a=>fe(a)&&a[n]);return t.filter(a=>i.includes(a.id))},_r=(e,t)=>so(e,t,"target"),br=(e,t)=>so(e,t,"source"),gt=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`vueflow__edge-${e}${t!=null?t:""}-${n}${o!=null?o:""}`,mt=(e,t)=>t.some(n=>fe(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Er=(e,t,n)=>{if(!e.source||!e.target)return ae("Can't create edge. An edge needs a source and a target."),t;let o;return fe(e)?o={...e}:o={...e,id:gt(e)},o=en(o,n),mt(o,t)||t.push(o),t},Nr=(e,t,n)=>{if(!t.source||!t.target)return ae("Can't create new edge. An edge needs a source and a target."),n;const o=n.find(a=>fe(a)&&a.id===e.id);if(!o)return ae(`The old edge with id=${e.id} does not exist.`),n;const i={...e,id:gt(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(o),1,i),n.filter(a=>a.id!==e.id)},lo=({x:e,y:t},{x:n,y:o,zoom:i},a,[s,l])=>{const c={x:(e-n)/i,y:(t-o)/i};return a?{x:s*Math.round(c.x/s),y:l*Math.round(c.y/l)}:c},co=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),pt=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),uo=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Sr=(e,t)=>uo(co(pt(e),pt(t))),tn=e=>{const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:i={width:0,height:0}}={})=>co(n,pt({...o,...i})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return uo(t)},kr=({x:e,y:t},{x:n,y:o,zoom:i})=>({x:e*i+n,y:t*i+o}),nn=(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},a=!1,s=!1)=>{const l={x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i};return e.filter(c=>{const{computedPosition:u={x:0,y:0},dimensions:d={width:0,height:0},selectable:h}=c;if(s&&!h)return!1;const f={...u,width:d.width||0,height:d.height||0},_=jt(l,f),m=typeof d.width>"u"||typeof d.height>"u"||d.width===0||d.height===0,g=a&&_>0,b=d.width*d.height;return m||g||_>=b})},Ze=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},on=(e,t,n,o,i,a=.1,s={x:0,y:0})=>{var g,b;const l=t/(e.width*(1+a)),c=n/(e.height*(1+a)),u=Math.min(l,c),d=ft(u,o,i),h=e.x+e.width/2,f=e.y+e.height/2,_=t/2-h*d+((g=s.x)!=null?g:0),m=n/2-f*d+((b=s.y)!=null?b:0);return{x:_,y:m,zoom:d}},Cr=(e,t)=>({x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}),fo=(e,t)=>{if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:fo(n,t):!1},Ne=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,ie=e=>typeof r.unref(e)<"u",$r=(e,t)=>{if(!e.source||!e.target)return ae("Can't create edge. An edge needs a source and a target."),!1;let n;return fe(e)?n={...e}:n={...e,id:gt(e)},n=en(n),mt(n,t)?!1:n},Mr=(e,t,n)=>{if(!t.source||!t.target)return ae("Can't create new edge. An edge needs a source and a target."),!1;const o=n.find(a=>Jt(a)&&a.id===e.id);if(!o)return ae(`The old edge with id=${e.id} does not exist.`),!1;const i={...e,id:gt(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(o),1,i),i},ho=(e,t,n,o)=>{const i={},a=e.map(s=>{const l=xr(s,o,{...t(s.id),parentNode:s.parentNode});return s.parentNode&&(i[s.parentNode]=!0),l});return a.forEach(s=>{const l=[...a,...n];if(s.parentNode&&!l.find(c=>c.id===s.parentNode)&&ae(`Parent node ${s.parentNode} not found`),s.parentNode||i[s.id]){i[s.id]&&(s.isParent=!0);const c=s.parentNode?t(s.parentNode):void 0;c&&(c.isParent=!0)}}),a};var q=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(q||{}),yt=(e=>(e.Partial="partial",e.Full="full",e))(yt||{}),Se=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Se||{}),Me=(e=>(e.Strict="strict",e.Loose="loose",e))(Me||{}),go=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(go||{}),Ke=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Ke||{}),mo=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(mo||{});const rn=Symbol("vueFlow"),an=Symbol("nodeId"),po=Symbol("nodeRef"),yo=Symbol("edgeId"),vo=Symbol("edgeRef"),vt=Symbol("slots");function wo(e){const t=e!=null?e:r.inject(an,""),n=r.inject(po,null),{findNode:o,getEdges:i}=ne(),a=o(t);if(!a)throw new Error(`[vue-flow]: useNode - Node with id ${t} not found!`);return{id:t,nodeEl:n,node:a,parentNode:r.computed(()=>a.parentNode?o(a.parentNode):void 0),connectedEdges:r.computed(()=>Ze([a],i.value))}}const We=(e,t,n,o,i,a,s,l,c)=>{var g,b;const u=e.touches?e.touches[0].clientX:e.clientX,d=e.touches?e.touches[0].clientY:e.clientY,h=s.elementFromPoint(u,d),f=(h==null?void 0:h.classList.contains("target"))||!1,_=(h==null?void 0:h.classList.contains("source"))||!1,m={elementBelow:h,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(h&&(f||_)&&(m.isHoveringHandle=!0,t===Me.Strict?n&&_||!n&&f:!0)){const E=(g=h.getAttribute("data-nodeid"))!=null?g:"",S=(b=h.getAttribute("data-handleid"))!=null?b:"",w=n?E:o,M=n?S:i,y=n?o:E,I={source:w,sourceHandle:M,target:y,targetHandle:n?i:S};m.connection=I,m.isValid=(pe(a)?a(I,{edges:l,sourceNode:c(w),targetNode:c(y)}):E!==o||S!==i)||!m.connection.target||!m.connection.source}return m},wt=e=>{e==null||e.classList.remove("vue-flow__handle-valid"),e==null||e.classList.remove("vue-flow__handle-connecting")};function sn({handleId:e,nodeId:t,isValidConnection:n,type:o,elementEdgeUpdaterType:i,onEdgeUpdateEnd:a,onEdgeUpdate:s}){const l=ne(),c=r.toRef(l,"edges"),u=r.toRef(l,"connectOnClick"),d=r.toRef(l,"nodesConnectable"),h=r.toRef(l,"connectionClickStartHandle"),f=r.toRef(l,"connectionMode"),_=r.toRef(l,"emits"),m=r.toRef(l,"startConnection"),g=r.toRef(l,"updateConnection"),b=r.toRef(l,"endConnection"),p=r.toRef(l,"getNode"),E=r.toRef(l,"vueFlowRef"),S=r.computed(()=>r.unref(o)==="target");let w;const M=A=>{if(A.button!==0)return;const T=Qt(A.target);if(!T)return;let G=n;const X=p.value(r.unref(t));if(X&&(typeof X.connectable>"u"?d.value:X.connectable)===!1)return;n||X&&(G=S.value?X.isValidSourcePos:X.isValidTargetPos);const Q=T.elementFromPoint(A.clientX,A.clientY),v=Q==null?void 0:Q.classList.contains("target"),z=Q==null?void 0:Q.classList.contains("source");if(!E.value||!v&&!z&&!i)return;const k=i!=null?i:v?"target":"source",P=E.value.getBoundingClientRect();m.value({nodeId:r.unref(t),handleId:r.unref(e),type:r.unref(k)},{x:A.clientX-P.left,y:A.clientY-P.top},A);function F($){g.value({x:$.clientX-P.left,y:$.clientY-P.top});const{connection:V,elementBelow:Z,isValid:te,isHoveringHandle:C}=We($,f.value,r.unref(S.value),r.unref(t),r.unref(e),G,T,c.value,p.value);if(!C)return wt(w);!(V.source===V.target)&&Z&&(w=Z,Z.classList.add("vue-flow__handle-connecting"),Z.classList.toggle("vue-flow__handle-valid",te))}function R($){const{connection:V,isValid:Z}=We($,f.value,r.unref(S.value),r.unref(t),r.unref(e),G,T,c.value,p.value),te=V.source===V.target;Z&&!te&&(s?s(V):_.value.connect(V)),i&&(a==null||a()),wt(w),b.value($),T.removeEventListener("mousemove",F),T.removeEventListener("mouseup",R)}T.addEventListener("mousemove",F),T.addEventListener("mouseup",R)},y=r.ref({x:0,y:0});return{onMouseDown:M,onTouchStart:A=>{const T=A.touches[0].clientX,G=A.touches[0].clientY,X=Qt(A.target);if(!X)return;let Q=n;const v=p.value(r.unref(t));if(v&&(typeof v.connectable>"u"?d.value:v.connectable)===!1)return;n||v&&(Q=S.value?v.isValidSourcePos:v.isValidTargetPos);const z=X.elementFromPoint(T,G),k=z==null?void 0:z.classList.contains("target"),P=z==null?void 0:z.classList.contains("source");if(!E.value||!k&&!P&&!i)return;const F=i!=null?i:k?"target":"source",R=E.value.getBoundingClientRect();m.value({nodeId:r.unref(t),handleId:r.unref(e),type:r.unref(F)},{x:T-R.left,y:G-R.top},A);function $(Z){g.value({x:Z.touches[0].clientX-R.left,y:Z.touches[0].clientY-R.top}),y.value={x:Z.touches[0].clientX,y:Z.touches[0].clientY};const{connection:te,elementBelow:C,isValid:H,isHoveringHandle:U}=We(Z,f.value,r.unref(S.value),r.unref(t),r.unref(e),Q,X,c.value,p.value);if(!U)return wt(w);!(te.source===te.target)&&C&&(w=C,C.classList.add("vue-flow__handle-connecting"),C.classList.toggle("vue-flow__handle-valid",H))}function V(Z){const{connection:te,isValid:C}=We({clientX:y.value.x,clientY:y.value.y},f.value,r.unref(S.value),r.unref(t),r.unref(e),Q,X,c.value,p.value),H=te.source===te.target;C&&!H&&(s?s(te):_.value.connect(te)),i&&(a==null||a()),wt(w),b.value(Z),y.value={x:0,y:0},X.removeEventListener("touchmove",$),X.removeEventListener("touchend",V)}X.addEventListener("touchmove",$),X.addEventListener("touchend",V)},onClick:A=>{var T;if(!!u.value)if(!h.value)m.value({nodeId:r.unref(t),type:r.unref(o),handleId:r.unref(e)},void 0,A,!0);else{let G=n!=null?n:()=>!0;const X=p.value(r.unref(t));if(X&&(typeof X.connectable>"u"?d.value:X.connectable)===!1)return;n||X&&(G=(T=S.value?X.isValidSourcePos:X.isValidTargetPos)!=null?T:()=>!0);const Q=Qt(A.target),{connection:v,isValid:z}=We(A,f.value,h.value.type==="target",h.value.nodeId,h.value.handleId||null,G,Q,c.value,p.value),k=v.source===v.target;z&&!k&&_.value.connect(v),b.value(A,!0)}}}}const Br=["data-handleid","data-nodeid","data-handlepos"],Rr={name:"Handle"},Ge=r.defineComponent({...Rr,props:{id:null,type:null,position:{default:()=>"top"},isValidConnection:null,connectable:{type:[Boolean,String,Function],default:!0}},setup(e){const t=r.createPropsRestProxy(e,["position","connectable","id","isValidConnection"]),n=r.toRef(t,"type","source"),o=ne(),i=r.toRef(o,"connectionStartHandle"),a=r.toRef(o,"vueFlowRef"),s=r.toRef(o,"nodesConnectable"),{id:l,node:c,nodeEl:u,connectedEdges:d}=wo(),h=r.ref(),f=r.computed(()=>{var p;return(p=e.id)!=null?p:`${l}__handle-${e.position}`}),{onMouseDown:_,onTouchStart:m,onClick:g}=sn({nodeId:l,handleId:f.value,isValidConnection:e.isValidConnection,type:n}),b=r.computed(()=>be(e.connectable)&&e.connectable==="single"?!d.value.some(p=>{const E=p[`${n.value}Handle`];return p[n.value]!==l?!1:E?E===f.value:!0}):pe(e.connectable)?e.connectable(c,d.value):ie(e.connectable)?e.connectable:s.value);return r.onMounted(()=>{$e(()=>c.initialized).toBe(!0).then(()=>{var I,A;const p=(I=c.handleBounds[n.value])==null?void 0:I.find(T=>T.id===f.value);if(!a.value||p)return;const E=a.value.querySelector(".vue-flow__transformationpane");if(!u||!h.value||!E||!f.value)return;const S=u.value.getBoundingClientRect(),w=h.value.getBoundingClientRect(),M=window.getComputedStyle(E),{m22:y}=new window.DOMMatrixReadOnly(M.transform),B={id:f.value,position:e.position,x:(w.left-S.left)/y,y:(w.top-S.top)/y,...dt(h.value)};c.handleBounds[n.value]=[...(A=c.handleBounds[n.value])!=null?A:[],B]})}),(p,E)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"handle",ref:h,"data-handleid":f.value,"data-nodeid":r.unref(l),"data-handlepos":e.position,class:r.normalizeClass(["vue-flow__handle nodrag",[`vue-flow__handle-${e.position}`,`vue-flow__handle-${f.value}`,{source:r.unref(n)!=="target",target:r.unref(n)==="target",connectable:r.unref(b),connecting:i.value&&i.value.nodeId===r.unref(l)&&i.value.handleId===f.value&&i.value.type===r.unref(n)}]]),onMousedown:E[0]||(E[0]=(...S)=>r.unref(_)&&r.unref(_)(...S)),onTouchstart:E[1]||(E[1]=(...S)=>r.unref(m)&&r.unref(m)(...S)),onClick:E[2]||(E[2]=(...S)=>r.unref(g)&&r.unref(g)(...S))},[r.renderSlot(p.$slots,"default",{id:e.id})],42,Br))}}),ln=function({sourcePosition:e=q.Bottom,targetPosition:t=q.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:a}){return[r.h(Ge,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof n!="string"&&n?r.h(n):r.h("div",{innerHTML:n}),r.h(Ge,{type:"source",position:e,connectable:o,isValidConnection:a})]};ln.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"],ln.inheritAttrs=!1;const zr=ln,cn=function({sourcePosition:e=q.Bottom,label:t,connectable:n=!0,isValidSourcePos:o}){return[typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t}),r.h(Ge,{type:"source",position:e,connectable:n,isValidConnection:o})]};cn.props=["sourcePosition","label","isValidSourcePos","connectable"],cn.inheritAttrs=!1;const Pr=cn,un=function({targetPosition:e=q.Top,label:t,connectable:n=!0,isValidTargetPos:o}){return[r.h(Ge,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t})]};un.props=["targetPosition","label","isValidTargetPos","connectable"],un.inheritAttrs=!1;const Or=un;function xo(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n.value)return!1;o=o.parentElement}while(o);return!1}function Tr(e,t,n,o){return e.filter(i=>(i.selected||i.id===o)&&(!i.parentNode||!fo(i,n))).map(i=>{var a,s;return r.markRaw({id:i.id,position:i.position||{x:0,y:0},distance:{x:t.x-((a=i.computedPosition)==null?void 0:a.x)||0,y:t.y-((s=i.computedPosition)==null?void 0:s.y)||0},from:i.computedPosition,extent:i.extent,parentNode:i.parentNode,dimensions:i.dimensions})})}function dn({id:e,dragItems:t,getNode:n}){const o=t.map(i=>({...n.value(i.id)}));return[e?o.find(i=>i.id===e):o[0],o]}function Ar(e,t,n){let o=e.extent||t;if(e.extent==="parent")e.parentNode&&n&&e.dimensions.width&&e.dimensions.height?o=n&&Ce(n.computedPosition.x)&&Ce(n.computedPosition.y)&&Ce(n.dimensions.width)&&Ce(n.dimensions.height)?[[n.computedPosition.x,n.computedPosition.y],[n.computedPosition.x+n.dimensions.width-e.dimensions.width,n.computedPosition.y+n.dimensions.height-e.dimensions.height]]:o:(ae("Only child nodes can use a parent extent."),o=t);else if(e.extent&&n){const i=n.computedPosition.x,a=n.computedPosition.y;o=[[e.extent[0][0]+i,e.extent[0][1]+a],[e.extent[1][0]+i,e.extent[1][1]+a]]}return o}const xt=(e,t,n,o)=>{const i=Ar(e,n,o);return{position:ao(t,i)}};function _o(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:a}=ne();return(s,l=!1)=>{const c=a.value?i.value[0]:5,u=a.value?i.value[1]:5,d=l?4:1,h=s.x*c*d,f=s.y*u*d,_=e.value.map(m=>{const g={x:m.computedPosition.x+h,y:m.computedPosition.y+f},b=xt(m,g,t.value,m.parentNode?o(m.parentNode):void 0);return{id:m.id,position:b.position,from:m.position,distance:{x:s.x,y:s.y},dimensions:m.dimensions}});n(_,!0,!1)}}const Ir=()=>({doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),dragStart:Y(),drag:Y(),dragStop:Y()});function Dr(e,t){const n=Ir();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function bo(){const{viewport:e,snapGrid:t,snapToGrid:n}=ne(),o=i=>(i!=null?i:n.value)?t.value:void 0;return({sourceEvent:i},a)=>{const s=r.unref(o(a)),l=i.touches?i.touches[0].clientX:i.clientX,c=i.touches?i.touches[0].clientY:i.clientY,u={x:(l-e.value.x)/e.value.zoom,y:(c-e.value.y)/e.value.zoom};return{xSnapped:s?s[0]*Math.round(u.x/s[0]):u.x,ySnapped:s?s[1]*Math.round(u.y/s[1]):u.y,...u}}}const Eo=(e,t,n)=>{const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const i=Array.from(o),a=t.getBoundingClientRect();return i.map(s=>{const l=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(l.left-a.left)/n,y:(l.top-a.top)/n,...dt(s)}})},fn=(e,t,n,o,i,a=!1)=>{i.value=!1,e.selected?(a||e.selected&&t)&&o([e]):n([e])};var Vr={value:()=>{}};function _t(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new bt(n)}function bt(e){this._=e}function Lr(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}bt.prototype=_t.prototype={constructor:bt,on:function(e,t){var n=this._,o=Lr(e+"",n),i,a=-1,s=o.length;if(arguments.length<2){for(;++a<s;)if((i=(e=o[a]).type)&&(i=Fr(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=o[a]).type)n[i]=No(n[i],e.name,t);else if(t==null)for(i in n)n[i]=No(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new bt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function Fr(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function No(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Vr,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var hn="http://www.w3.org/1999/xhtml";const So={svg:"http://www.w3.org/2000/svg",xhtml:hn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Et(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),So.hasOwnProperty(t)?{space:So[t],local:e}:e}function Hr(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===hn&&t.documentElement.namespaceURI===hn?t.createElement(e):t.createElementNS(n,e)}}function Yr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ko(e){var t=Et(e);return(t.local?Yr:Hr)(t)}function Xr(){}function gn(e){return e==null?Xr:function(){return this.querySelector(e)}}function Zr(e){typeof e!="function"&&(e=gn(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,l=o[i]=new Array(s),c,u,d=0;d<s;++d)(c=a[d])&&(u=e.call(c,c.__data__,d,a))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new le(o,this._parents)}function Kr(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Wr(){return[]}function Co(e){return e==null?Wr:function(){return this.querySelectorAll(e)}}function Gr(e){return function(){return Kr(e.apply(this,arguments))}}function Ur(e){typeof e=="function"?e=Gr(e):e=Co(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var s=t[a],l=s.length,c,u=0;u<l;++u)(c=s[u])&&(o.push(e.call(c,c.__data__,u,s)),i.push(c));return new le(o,i)}function $o(e){return function(){return this.matches(e)}}function Mo(e){return function(t){return t.matches(e)}}var qr=Array.prototype.find;function jr(e){return function(){return qr.call(this.children,e)}}function Qr(){return this.firstElementChild}function Jr(e){return this.select(e==null?Qr:jr(typeof e=="function"?e:Mo(e)))}var ea=Array.prototype.filter;function ta(){return Array.from(this.children)}function na(e){return function(){return ea.call(this.children,e)}}function oa(e){return this.selectAll(e==null?ta:na(typeof e=="function"?e:Mo(e)))}function ia(e){typeof e!="function"&&(e=$o(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,l=o[i]=[],c,u=0;u<s;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&l.push(c);return new le(o,this._parents)}function Bo(e){return new Array(e.length)}function ra(){return new le(this._enter||this._groups.map(Bo),this._parents)}function Nt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Nt.prototype={constructor:Nt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function aa(e){return function(){return e}}function sa(e,t,n,o,i,a){for(var s=0,l,c=t.length,u=a.length;s<u;++s)(l=t[s])?(l.__data__=a[s],o[s]=l):n[s]=new Nt(e,a[s]);for(;s<c;++s)(l=t[s])&&(i[s]=l)}function la(e,t,n,o,i,a,s){var l,c,u=new Map,d=t.length,h=a.length,f=new Array(d),_;for(l=0;l<d;++l)(c=t[l])&&(f[l]=_=s.call(c,c.__data__,l,t)+"",u.has(_)?i[l]=c:u.set(_,c));for(l=0;l<h;++l)_=s.call(e,a[l],l,a)+"",(c=u.get(_))?(o[l]=c,c.__data__=a[l],u.delete(_)):n[l]=new Nt(e,a[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(f[l])===c&&(i[l]=c)}function ca(e){return e.__data__}function ua(e,t){if(!arguments.length)return Array.from(this,ca);var n=t?la:sa,o=this._parents,i=this._groups;typeof e!="function"&&(e=aa(e));for(var a=i.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var d=o[u],h=i[u],f=h.length,_=da(e.call(d,d&&d.__data__,u,o)),m=_.length,g=l[u]=new Array(m),b=s[u]=new Array(m),p=c[u]=new Array(f);n(d,h,g,b,p,_,t);for(var E=0,S=0,w,M;E<m;++E)if(w=g[E]){for(E>=S&&(S=E+1);!(M=b[S])&&++S<m;);w._next=M||null}}return s=new le(s,o),s._enter=l,s._exit=c,s}function da(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fa(){return new le(this._exit||this._groups.map(Bo),this._parents)}function ha(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function ga(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,s=Math.min(i,a),l=new Array(i),c=0;c<s;++c)for(var u=n[c],d=o[c],h=u.length,f=l[c]=new Array(h),_,m=0;m<h;++m)(_=u[m]||d[m])&&(f[m]=_);for(;c<i;++c)l[c]=n[c];return new le(l,this._parents)}function ma(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],s;--i>=0;)(s=o[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function pa(e){e||(e=ya);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var s=n[a],l=s.length,c=i[a]=new Array(l),u,d=0;d<l;++d)(u=s[d])&&(c[d]=u);c.sort(t)}return new le(i,this._parents).order()}function ya(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function va(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function wa(){return Array.from(this)}function xa(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var s=o[i];if(s)return s}return null}function _a(){let e=0;for(const t of this)++e;return e}function ba(){return!this.node()}function Ea(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,s=i.length,l;a<s;++a)(l=i[a])&&e.call(l,l.__data__,a,i);return this}function Na(e){return function(){this.removeAttribute(e)}}function Sa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ka(e,t){return function(){this.setAttribute(e,t)}}function Ca(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $a(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ma(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ba(e,t){var n=Et(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Sa:Na:typeof t=="function"?n.local?Ma:$a:n.local?Ca:ka)(n,t))}function Ro(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ra(e){return function(){this.style.removeProperty(e)}}function za(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Pa(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Oa(e,t,n){return arguments.length>1?this.each((t==null?Ra:typeof t=="function"?Pa:za)(e,t,n==null?"":n)):Te(this.node(),e)}function Te(e,t){return e.style.getPropertyValue(t)||Ro(e).getComputedStyle(e,null).getPropertyValue(t)}function Ta(e){return function(){delete this[e]}}function Aa(e,t){return function(){this[e]=t}}function Ia(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Da(e,t){return arguments.length>1?this.each((t==null?Ta:typeof t=="function"?Ia:Aa)(e,t)):this.node()[e]}function zo(e){return e.trim().split(/^|\s+/)}function mn(e){return e.classList||new Po(e)}function Po(e){this._node=e,this._names=zo(e.getAttribute("class")||"")}Po.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Oo(e,t){for(var n=mn(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function To(e,t){for(var n=mn(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Va(e){return function(){Oo(this,e)}}function La(e){return function(){To(this,e)}}function Fa(e,t){return function(){(t.apply(this,arguments)?Oo:To)(this,e)}}function Ha(e,t){var n=zo(e+"");if(arguments.length<2){for(var o=mn(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Fa:t?Va:La)(n,t))}function Ya(){this.textContent=""}function Xa(e){return function(){this.textContent=e}}function Za(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Ka(e){return arguments.length?this.each(e==null?Ya:(typeof e=="function"?Za:Xa)(e)):this.node().textContent}function Wa(){this.innerHTML=""}function Ga(e){return function(){this.innerHTML=e}}function Ua(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function qa(e){return arguments.length?this.each(e==null?Wa:(typeof e=="function"?Ua:Ga)(e)):this.node().innerHTML}function ja(){this.nextSibling&&this.parentNode.appendChild(this)}function Qa(){return this.each(ja)}function Ja(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function es(){return this.each(Ja)}function ts(e){var t=typeof e=="function"?e:ko(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ns(){return null}function os(e,t){var n=typeof e=="function"?e:ko(e),o=t==null?ns:typeof t=="function"?t:gn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function is(){var e=this.parentNode;e&&e.removeChild(this)}function rs(){return this.each(is)}function as(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ss(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ls(e){return this.select(e?ss:as)}function cs(e){return arguments.length?this.property("__data__",e):this.node().__data__}function us(e){return function(t){e.call(this,t,this.__data__)}}function ds(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function fs(e){return function(){var t=this.__on;if(!!t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function hs(e,t,n){return function(){var o=this.__on,i,a=us(t);if(o){for(var s=0,l=o.length;s<l;++s)if((i=o[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function gs(e,t,n){var o=ds(e+""),i,a=o.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(i=0,d=l[c];i<a;++i)if((s=o[i]).type===d.type&&s.name===d.name)return d.value}return}for(l=t?hs:fs,i=0;i<a;++i)this.each(l(o[i],t,n));return this}function Ao(e,t,n){var o=Ro(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ms(e,t){return function(){return Ao(this,e,t)}}function ps(e,t){return function(){return Ao(this,e,t.apply(this,arguments))}}function ys(e,t){return this.each((typeof t=="function"?ps:ms)(e,t))}function*vs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,s;i<a;++i)(s=o[i])&&(yield s)}var Io=[null];function le(e,t){this._groups=e,this._parents=t}function Ue(){return new le([[document.documentElement]],Io)}function ws(){return this}le.prototype=Ue.prototype={constructor:le,select:Zr,selectAll:Ur,selectChild:Jr,selectChildren:oa,filter:ia,data:ua,enter:ra,exit:fa,join:ha,merge:ga,selection:ws,order:ma,sort:pa,call:va,nodes:wa,node:xa,size:_a,empty:ba,each:Ea,attr:Ba,style:Oa,property:Da,classed:Ha,text:Ka,html:qa,raise:Qa,lower:es,append:ts,insert:os,remove:rs,clone:ls,datum:cs,on:gs,dispatch:ys,[Symbol.iterator]:vs};function ce(e){return typeof e=="string"?new le([[document.querySelector(e)]],[document.documentElement]):new le([[e]],Io)}function xs(e){let t;for(;t=e.sourceEvent;)e=t;return e}function he(e,t){if(e=xs(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const _s={passive:!1},qe={capture:!0,passive:!1};function pn(e){e.stopImmediatePropagation()}function Ae(e){e.preventDefault(),e.stopImmediatePropagation()}function Do(e){var t=e.document.documentElement,n=ce(e).on("dragstart.drag",Ae,qe);"onselectstart"in t?n.on("selectstart.drag",Ae,qe):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Vo(e,t){var n=e.document.documentElement,o=ce(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ae,qe),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const St=e=>()=>e;function yn(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:s,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}yn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function bs(e){return!e.ctrlKey&&!e.button}function Es(){return this.parentNode}function Ns(e,t){return t==null?{x:e.x,y:e.y}:t}function Ss(){return navigator.maxTouchPoints||"ontouchstart"in this}function ks(){var e=bs,t=Es,n=Ns,o=Ss,i={},a=_t("start","drag","end"),s=0,l,c,u,d,h=0;function f(w){w.on("mousedown.drag",_).filter(o).on("touchstart.drag",b).on("touchmove.drag",p,_s).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(w,M){if(!(d||!e.call(this,w,M))){var y=S(this,t.call(this,w,M),w,M,"mouse");!y||(ce(w.view).on("mousemove.drag",m,qe).on("mouseup.drag",g,qe),Do(w.view),pn(w),u=!1,l=w.clientX,c=w.clientY,y("start",w))}}function m(w){if(Ae(w),!u){var M=w.clientX-l,y=w.clientY-c;u=M*M+y*y>h}i.mouse("drag",w)}function g(w){ce(w.view).on("mousemove.drag mouseup.drag",null),Vo(w.view,u),Ae(w),i.mouse("end",w)}function b(w,M){if(!!e.call(this,w,M)){var y=w.changedTouches,B=t.call(this,w,M),I=y.length,A,T;for(A=0;A<I;++A)(T=S(this,B,w,M,y[A].identifier,y[A]))&&(pn(w),T("start",w,y[A]))}}function p(w){var M=w.changedTouches,y=M.length,B,I;for(B=0;B<y;++B)(I=i[M[B].identifier])&&(Ae(w),I("drag",w,M[B]))}function E(w){var M=w.changedTouches,y=M.length,B,I;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),B=0;B<y;++B)(I=i[M[B].identifier])&&(pn(w),I("end",w,M[B]))}function S(w,M,y,B,I,A){var T=a.copy(),G=he(A||y,M),X,Q,v;if((v=n.call(w,new yn("beforestart",{sourceEvent:y,target:f,identifier:I,active:s,x:G[0],y:G[1],dx:0,dy:0,dispatch:T}),B))!=null)return X=v.x-G[0]||0,Q=v.y-G[1]||0,function z(k,P,F){var R=G,$;switch(k){case"start":i[I]=z,$=s++;break;case"end":delete i[I],--s;case"drag":G=he(F||P,M),$=s;break}T.call(k,w,new yn(k,{sourceEvent:P,subject:v,target:f,identifier:I,active:$,x:G[0]+X,y:G[1]+Q,dx:G[0]-R[0],dy:G[1]-R[1],dispatch:T}),B)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:St(!!w),f):e},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:St(w),f):t},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:St(w),f):n},f.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:St(!!w),f):o},f.on=function(){var w=a.on.apply(a,arguments);return w===a?f:w},f.clickDistance=function(w){return arguments.length?(h=(w=+w)*w,f):Math.sqrt(h)},f}function Lo(e){const t=r.effectScope(),n=t.run(()=>{const o=ne(),i=r.toRef(o,"snapToGrid"),a=r.toRef(o,"snapGrid"),s=r.toRef(o,"noDragClassName"),l=r.toRef(o,"nodes"),c=r.toRef(o,"nodeExtent"),u=r.toRef(o,"getNode"),d=r.toRef(o,"multiSelectionActive"),h=r.toRef(o,"nodesSelectionActive"),f=r.toRef(o,"selectNodesOnDrag"),_=r.toRef(o,"removeSelectedElements"),m=r.toRef(o,"addSelectedNodes"),g=r.toRef(o,"updateNodePositions"),b=e,p=r.toRef(b,"onStart"),E=r.toRef(b,"onDrag"),S=r.toRef(b,"onStop"),w=r.toRef(b,"el"),M=r.toRef(b,"disabled",!1),y=r.toRef(b,"id"),B=r.ref(!1);let I=r.ref(),A=r.ref({x:void 0,y:void 0}),T=r.ref();const G=bo();return r.watch([()=>M.value,()=>w.value],()=>{if(w.value){const X=ce(w.value),Q=y.value?u.value(y.value):void 0;M.value?X.on(".drag",null):(T.value=ks().on("start",v=>{!f.value&&!d.value&&y.value&&(Q!=null&&Q.selected||_.value()),Q&&!M.value&&f.value&&fn(Q,d.value,m.value,_.value,h);const z=G(v,i.value?a.value:void 0);if(I.value=Tr(l.value,z,u.value,y.value),p.value&&I.value){const[k,P]=dn({id:y.value,dragItems:I.value,getNode:u});p.value(v.sourceEvent,k,P)}}).on("drag",v=>{const z=G(v,i.value?a.value:void 0);let k=!1;if((A.value.x!==z.x||A.value.y!==z.y)&&I.value){if(A.value=z,I.value=I.value.map(P=>{const F={x:z.x-P.distance.x,y:z.y-P.distance.y};if(i.value&&a.value){const[$,V]=a.value;F.x=$*Math.round(F.x/$),F.y=V*Math.round(F.y/V)}const{position:R}=xt(P,F,c.value,P.parentNode?u.value(P.parentNode):void 0);return k=k||P.position.x!==F.x||P.position.y!==F.y,P.position=R,P}),!k)return;if(g.value(I.value,!0,!0),E.value){const[P,F]=dn({id:y.value,dragItems:I.value,getNode:u});B.value=!0,E.value(v.sourceEvent,P,F)}}v.on("end",P=>{if(B.value=!1,S.value&&I.value){g.value(I.value,!1,!1);const[F,R]=dn({id:y.value,dragItems:I.value,getNode:u});B.value=!1,S.value(P.sourceEvent,F,R)}})}).on("end",()=>{B.value=!1}).filter(v=>{const z=v.target;return!v.button&&(!s.value||!xo(z,`.${s.value}`,w)&&(!(Q!=null&&Q.dragHandle)||xo(z,Q.dragHandle,w)))}),X.call(T.value))}}),B});return He(()=>t.stop()),n}function vn(e){var i,a;const t=((a=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:a[0])||e.target;if(e.ctrlKey||e.metaKey||e.shiftKey)return!1;const n=pe(t.hasAttribute)?t.hasAttribute("contenteditable"):!1,o=pe(t.closest)?t.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||n||!!o}const je=(e,t)=>{const n=Xe();let o=r.ref(r.unref(e)===!0);return r.watch(o,()=>{t&&typeof t=="function"&&t(o.value)}),r.watchEffect(()=>{const i=r.unref(e);if(Yi(i)){o.value=i;return}i&&(eo(i,a=>{vn(a)||(a.preventDefault(),o.value=!0)},{eventName:"keydown"}),eo(i,a=>{vn(a)||(a.preventDefault(),o.value=!1)},{eventName:"keyup"}))}),typeof n.addEventListener<"u"&&Gt(n,"blur",()=>{o.value=!1}),o},Fo="vue-flow__node-desc",Ho="vue-flow__edge-desc",Cs="react-flow__aria-live",Yo=["Enter"," ","Escape"],Ie={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},$s=["tabIndex","role","aria-describedby","aria-label","data-id"],Ms={name:"Node",inheritAttrs:!1},Bs=r.defineComponent({...Ms,props:{id:null,draggable:{type:Boolean},selectable:{type:Boolean},connectable:null,focusable:{type:Boolean},type:{type:[null,Function,Object,Boolean]},name:null,node:null,resizeObserver:null},setup(e){const t=r.createPropsRestProxy(e,["id","type","name","draggable","selectable","connectable"]);r.provide(an,e.id);const n=ne(),o=r.toRef(n,"id"),i=r.toRef(n,"edges"),a=r.toRef(n,"noPanClassName"),s=r.toRef(n,"selectNodesOnDrag"),l=r.toRef(n,"nodesSelectionActive"),c=r.toRef(n,"multiSelectionActive"),u=r.toRef(n,"emits"),d=r.toRef(n,"getNode"),h=r.toRef(n,"removeSelectedElements"),f=r.toRef(n,"addSelectedNodes"),_=r.toRef(n,"updateNodeDimensions"),m=r.toRef(n,"onUpdateNodeInternals"),g=r.toRef(n,"getIntersectingNodes"),b=r.toRef(n,"getNodeTypes"),p=r.toRef(n,"nodeExtent"),E=r.toRef(n,"elevateNodesOnSelect"),S=r.toRef(n,"disableKeyboardA11y"),w=r.toRef(n,"ariaLiveMessage"),M=_o(),y=Ye(t,"node"),B=r.computed(()=>y.value.parentNode?d.value(y.value.parentNode):void 0),I=r.computed(()=>Ze([y.value],i.value)),A=r.ref();r.provide(po,A);const{emit:T,on:G}=Dr(y.value,u.value),X=Lo({id:e.id,el:A,disabled:r.computed(()=>!e.draggable),onStart(C,H,U){T.dragStart({event:C,node:H,nodes:U,intersections:g.value(H)})},onDrag(C,H,U){T.drag({event:C,node:H,nodes:U,intersections:g.value(H)})},onStop(C,H,U){T.dragStop({event:C,node:H,nodes:U,intersections:g.value(H)})}}),Q=r.computed(()=>y.value.class instanceof Function?y.value.class(y.value):y.value.class),v=r.computed(()=>{const C=(y.value.style instanceof Function?y.value.style(y.value):y.value.style)||{},H=y.value.width instanceof Function?y.value.width(y.value):y.value.width,U=y.value.height instanceof Function?y.value.height(y.value):y.value.height;return H&&(C.width=typeof H=="string"?H:`${H}px`),U&&(C.height=typeof U=="string"?U:`${U}px`),C});m.value(C=>{C.includes(e.id)&&k()}),r.onMounted(()=>{t.resizeObserver.observe(A.value)}),r.onBeforeUnmount(()=>{t.resizeObserver.unobserve(A.value)}),r.watch([()=>y.value.type,()=>y.value.sourcePosition,()=>y.value.targetPosition],()=>{_.value([{id:e.id,nodeElement:A.value,forceUpdate:!0}])},{flush:"pre"}),r.watch([()=>y.value.position.x,()=>y.value.position.y,()=>{var C;return(C=B.value)==null?void 0:C.computedPosition.x},()=>{var C;return(C=B.value)==null?void 0:C.computedPosition.y},()=>{var C;return(C=B.value)==null?void 0:C.computedPosition.z},()=>y.value.selected,()=>y.value.dimensions,()=>{var C;return(C=B.value)==null?void 0:C.dimensions}],([C,H,U,x,N])=>{const D={x:C,y:H,z:(Ce(v.value.zIndex)?v.value.zIndex:0)+(E.value&&y.value.selected?1e3:0)};z(D,U&&x?{x:U,y:x,z:N||0}:void 0)},{flush:"pre",immediate:!0});function z(C,H){let U=C;H&&(U=Cr({x:H.x,y:H.y,z:H.z},C)),y.value.computedPosition=U}$e(()=>y.value.initialized).toBe(!0).then(()=>{const{position:C}=xt(y.value,y.value.computedPosition,p.value,B.value);y.value.computedPosition={...y.value.computedPosition,...C}});function k(){A.value&&_.value([{id:e.id,nodeElement:A.value,forceUpdate:!0}]);const{position:C}=xt(y.value,y.value.position,p.value,B.value);y.value.position=C}function P(C){X!=null&&X.value||T.mouseEnter({event:C,node:y.value,connectedEdges:I.value})}function F(C){X!=null&&X.value||T.mouseMove({event:C,node:y.value,connectedEdges:I.value})}function R(C){X!=null&&X.value||T.mouseLeave({event:C,node:y.value,connectedEdges:I.value})}function $(C){return T.contextMenu({event:C,node:y.value,connectedEdges:I.value})}function V(C){return T.doubleClick({event:C,node:y.value,connectedEdges:I.value})}function Z(C){e.selectable&&(!s.value||!e.draggable)&&fn(y.value,c.value,f.value,h.value,l),T.click({event:C,node:y.value,connectedEdges:I.value})}const te=C=>{var H;if(!vn(C))if(C.preventDefault(),Yo.includes(C.key)&&e.selectable){const U=C.key==="Escape";U&&((H=A.value)==null||H.blur()),fn(y.value,c.value,f.value,h.value,l,U)}else!S.value&&e.draggable&&y.value.selected&&Ie[C.key]&&(w.value=`Moved selected node ${C.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~y.value.position.x}, y: ${~~y.value.position.y}`,M({x:Ie[C.key].x,y:Ie[C.key].y},C.shiftKey))};return(C,H)=>{var U;return r.openBlock(),r.createElementBlock("div",{ref_key:"nodeElement",ref:A,class:r.normalizeClass(["vue-flow__node",[`vue-flow__node-${e.type===!1?"default":e.name}`,a.value,{dragging:r.unref(X),selected:y.value.selected,selectable:e.selectable},r.unref(Q)]]),style:r.normalizeStyle({zIndex:(U=y.value.computedPosition.z)!=null?U:0,transform:`translate(${y.value.computedPosition.x}px,${y.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",...r.unref(v)}),tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":S.value?void 0:`${r.unref(Fo)}-${o.value}`,"aria-label":y.value.ariaLabel,"data-id":y.value.id,onMouseenter:P,onMousemove:F,onMouseleave:R,onContextmenu:$,onClick:Z,onDblclick:V,onKeydown:te},[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.type===!1?b.value.default:e.type),{id:y.value.id,type:y.value.type,data:y.value.data,events:{...y.value.events,...r.unref(G)},selected:!!y.value.selected,resizing:!!y.value.resizing,dragging:r.unref(X),connectable:e.connectable,position:y.value.position,dimensions:y.value.dimensions,"is-valid-target-pos":y.value.isValidTargetPos,"is-valid-source-pos":y.value.isValidSourcePos,"parent-node":y.value.parentNode,"z-index":y.value.computedPosition.z,"target-position":y.value.targetPosition,"source-position":y.value.sourcePosition,label:y.value.label,"drag-handle":y.value.dragHandle,onUpdateNodeInternals:k},null,40,["id","type","data","events","selected","resizing","dragging","connectable","position","dimensions","is-valid-target-pos","is-valid-source-pos","parent-node","z-index","target-position","source-position","label","drag-handle"]))],46,$s)}}}),Rs=["transform"],zs=["width","height","x","y","rx","ry"],Ps=["y"],Os={name:"EdgeText"},Xo=r.defineComponent({...Os,props:{x:null,y:null,label:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){let t=r.ref({x:0,y:0,width:0,height:0});const n=r.ref(null),o=()=>{if(!n.value)return;const a=n.value.getBBox();(a.width!==t.value.width||a.height!==t.value.height)&&(t.value=a)};r.onMounted(o),r.watch([()=>e.x,()=>e.y,n,()=>e.label],o);const i=r.computed(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);return(a,s)=>(r.openBlock(),r.createElementBlock("g",{transform:r.unref(i),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(r.openBlock(),r.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*e.labelBgPadding[0]}px`,height:`${t.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:r.normalizeStyle(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,zs)):r.createCommentVNode("",!0),r.createElementVNode("text",r.mergeProps(a.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:e.labelStyle}),[r.renderSlot(a.$slots,"default",{},()=>[r.unref(be)(e.label)?(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[r.createTextVNode(r.toDisplayString(e.label),1)],64)):(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.label),{key:0}))])],16,Ps)],8,Rs))}}),wn=function({path:e,label:t,labelX:n,labelY:o,labelBgBorderRadius:i,labelBgPadding:a,labelBgStyle:s,labelShowBg:l=!0,labelStyle:c,markerStart:u,markerEnd:d,interactionWidth:h=20},{attrs:f}){return[r.h("path",{style:f.style,class:["vue-flow__edge-path",f.class].join(" "),d:e,"marker-end":d,"marker-start":u}),h?r.h("path",{d:e,fill:"none","stroke-opacity":0,"stroke-width":h}):null,t&&Ce(n)&&Ce(o)?r.h(Xo,{x:n,y:o,label:t,labelStyle:c,labelShowBg:l,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:i}):null]};wn.props=["path","labelX","labelY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","interactionWidth"],wn.inheritAttrs=!1;const Qe=wn;function Zo({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,s=Math.abs(o-t)/2,l=o<t?o+s:o-s;return[a,l,i,s]}function Ko({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:s,targetControlY:l}){const c=e*.125+i*.375+s*.375+n*.125,u=t*.125+a*.375+l*.375+o*.125,d=Math.abs(c-e),h=Math.abs(u-t);return[c,u,d,h]}function kt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Wo({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let s,l;switch(e){case q.Left:s=t-kt(t-o,a),l=n;break;case q.Right:s=t+kt(o-t,a),l=n;break;case q.Top:s=t,l=n-kt(n-i,a);break;case q.Bottom:s=t,l=n+kt(i-n,a);break}return[s,l]}function xn({sourceX:e,sourceY:t,sourcePosition:n=q.Bottom,targetX:o,targetY:i,targetPosition:a=q.Top,curvature:s=.25}){const[l,c]=Wo({pos:n,x1:e,y1:t,x2:o,y2:i,c:s}),[u,d]=Wo({pos:a,x1:o,y1:i,x2:e,y2:t,c:s}),[h,f,_,m]=Ko({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${o},${i}`,h,f,_,m]}const _n=function({sourcePosition:e=q.Bottom,targetPosition:t=q.Top,...n},{attrs:o}){const[i,a,s]=xn({sourcePosition:e,targetPosition:t,...n});return r.h(Qe,{path:i,labelX:a,labelY:s,...n,...o})};_n.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],_n.inheritAttrs=!1;const Go=_n;function Uo({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,s;switch(e){case q.Left:case q.Right:a=.5*(t+o),s=n;break;case q.Top:case q.Bottom:a=t,s=.5*(n+i);break}return[a,s]}function bn({sourceX:e,sourceY:t,sourcePosition:n=q.Bottom,targetX:o,targetY:i,targetPosition:a=q.Top}){const[s,l]=Uo({pos:n,x1:e,y1:t,x2:o,y2:i}),[c,u]=Uo({pos:a,x1:o,y1:i,x2:e,y2:t}),[d,h,f,_]=Ko({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${l} ${c},${u} ${o},${i}`,d,h,f,_]}const En=function({sourcePosition:e=q.Bottom,targetPosition:t=q.Top,...n},{attrs:o}){const[i,a,s]=bn({sourcePosition:e,targetPosition:t,...n});return r.h(Qe,{path:i,labelX:a,labelY:s,...n,...o})};En.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],En.inheritAttrs=!1;const qo=En,jo={[q.Left]:{x:-1,y:0},[q.Right]:{x:1,y:0},[q.Top]:{x:0,y:-1},[q.Bottom]:{x:0,y:1}},Ts=({source:e,sourcePosition:t=q.Bottom,target:n})=>t===q.Left||t===q.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Qo=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);function As({source:e,sourcePosition:t=q.Bottom,target:n,targetPosition:o=q.Top,center:i,offset:a}){const s=jo[t],l=jo[o],c={x:e.x+s.x*a,y:e.y+s.y*a},u={x:n.x+l.x*a,y:n.y+l.y*a},d=Ts({source:c,sourcePosition:t,target:u}),h=d.x!==0?"x":"y",f=d[h];let _=[],m,g;const[b,p,E,S]=Zo({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[h]*l[h]===-1){m=i.x||b,g=i.y||p;const M=[{x:m,y:c.y},{x:m,y:u.y}],y=[{x:c.x,y:g},{x:u.x,y:g}];s[h]===f?_=h==="x"?M:y:_=h==="x"?y:M}else{const M=[{x:c.x,y:u.y}],y=[{x:u.x,y:c.y}];if(h==="x"?_=s.x===f?y:M:_=s.y===f?M:y,t!==o){const B=h==="x"?"y":"x",I=s[h]===l[B],A=c[B]>u[B],T=c[B]<u[B];(s[h]===1&&(!I&&A||I&&T)||s[h]!==1&&(!I&&T||I&&A))&&(_=h==="x"?M:y)}m=_[0].x,g=_[0].y}return[[e,c,..._,u,n],m,g,E,S]}function Is(e,t,n,o){const i=Math.min(Qo(e,t)/2,Qo(t,n)/2,o),{x:a,y:s}=t;if(e.x===a&&a===n.x||e.y===s&&s===n.y)return`L${a} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${a+i*u},${s}Q ${a},${s} ${a},${s+i*d}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${s+i*c}Q ${a},${s} ${a+i*l},${s}`}function Ct({sourceX:e,sourceY:t,sourcePosition:n=q.Bottom,targetX:o,targetY:i,targetPosition:a=q.Top,borderRadius:s=5,centerX:l,centerY:c,offset:u=20}){const[d,h,f,_,m]=As({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:a,center:{x:l,y:c},offset:u});return[d.reduce((b,p,E)=>{let S="";return E>0&&E<d.length-1?S=Is(d[E-1],p,d[E+1],s):S=`${E===0?"M":"L"}${p.x} ${p.y}`,b+=S,b},""),h,f,_,m]}const Nn=function({sourcePosition:e=q.Bottom,targetPosition:t=q.Top,...n},{attrs:o}){const[i,a,s]=Ct({sourcePosition:e,targetPosition:t,...n});return r.h(Qe,{path:i,labelX:a,labelY:s,...n,...o})};Nn.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth"],Nn.inheritAttrs=!1;const Sn=Nn,kn=function(e,{attrs:t}){return r.h(Sn,{...e,...t,borderRadius:0})};kn.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],kn.inheritAttrs=!1;const Jo=kn;function ei({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[i,a,s,l]=Zo({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,i,a,s,l]}const Cn=function(e,{attrs:t}){const[n,o,i]=ei(e);return r.h(Qe,{path:n,labelX:o,labelY:i,...e,...t})};Cn.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],Cn.inheritAttrs=!1;const ti=Cn,Ds=(e,t,n)=>n===q.Left?e-t:n===q.Right?e+t:e,Vs=(e,t,n)=>n===q.Top?e-t:n===q.Bottom?e+t:e,ni=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=q.Top}){const i=()=>{const s=Ds(t,e,o);return isNaN(s)?0:s},a=()=>{const s=Vs(n,e,o);return isNaN(s)?0:s};return r.h("circle",{class:"vue-flow__edgeupdater",cx:i(),cy:a(),r:e,stroke:"transparent",fill:"transparent"})};ni.props=["radius","centerX","centerY","position"];const oi=ni,Ls=()=>({doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),updateStart:Y(),update:Y(),updateEnd:Y()});function Fs(e,t){const n=Ls();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}const ii=(e,t,n)=>{var l,c,u,d;const o=((l=n==null?void 0:n.x)!=null?l:0)+t.x,i=((c=n==null?void 0:n.y)!=null?c:0)+t.y,a=(u=n==null?void 0:n.width)!=null?u:t.width,s=(d=n==null?void 0:n.height)!=null?d:t.height;switch(e){case q.Top:return{x:o+a/2,y:i};case q.Right:return{x:o+a,y:i+s/2};case q.Bottom:return{x:o+a/2,y:i+s};case q.Left:return{x:o,y:i+s/2}}},ri=(e=[],t)=>{if(!e.length)return;let n;return!t&&e.length===1?n=e[0]:t&&(n=e.find(o=>o.id===t)),n||e[0]},Hs=(e,t,n,o,i,a)=>{const s=ii(n,{...e.dimensions,...e.computedPosition},t),l=ii(a,{...o.dimensions,...o.computedPosition},i);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function Ys({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:s,height:l,viewport:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=pt({x:(0-c.x)/c.zoom,y:(0-c.y)/c.zoom,width:s/c.zoom,height:l/c.zoom}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),f=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*f)>0}const Xs=(e,t)=>{let n=-1;const o=e.reduce((i,a)=>{const s=t(a.source),l=t(a.target);if(!s||!l)return i;const c=a.z?a.z:Math.max(s.computedPosition.z||0,l.computedPosition.z||0);return i[c]?i[c].push(a):i[c]=[a],n=c>n?c:n,i},{});return Object.entries(Object.keys(o).length?o:{0:[]}).map(([i,a])=>{const s=+i;return{edges:a,level:s,isMaxLevel:s===n}})},Zs=r.defineComponent({props:["name","type","id","updatable","selectable","focusable","edge","sourceNode","targetNode"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:a,nodesSelectionActive:s,getEdges:l,getEdgeTypes:c,removeSelectedEdges:u,findEdge:d}=ne(),h=Fs(e.edge,a),f=Ye(e,"edge");let _=r.ref(!1),m=r.ref(!1);const g=r.ref(""),b=r.ref(null),p=r.ref("source"),E=r.ref("source"),S=r.ref(),w=r.ref();r.provide(yo,e.id),r.provide(vo,w);const M=()=>_.value=!0,y=()=>_.value=!1,B=$=>{mt($,l.value)||h.emit.update({edge:f.value,connection:$})},I=()=>{!S.value||(h.emit.updateEnd({event:S.value,edge:f.value}),m.value=!1)},{onMouseDown:A}=sn({nodeId:g,handleId:b,type:p,isValidConnection:void 0,elementEdgeUpdaterType:E,onEdgeUpdate:B,onEdgeUpdateEnd:I}),T=($,V)=>{var Z;g.value=V?f.value.target:f.value.source,b.value=(Z=V?f.value.targetHandle:f.value.sourceHandle)!=null?Z:"",p.value=V?"target":"source",E.value=p.value,S.value=$,h.emit.updateStart({event:$,edge:f.value}),A($)},G=$=>{const V={event:$,edge:f.value};e.selectable&&(s.value=!1,n([f.value])),h.emit.click(V)},X=$=>h.emit.contextMenu({event:$,edge:f.value}),Q=$=>h.emit.doubleClick({event:$,edge:f.value}),v=$=>h.emit.mouseEnter({event:$,edge:f.value}),z=$=>h.emit.mouseMove({event:$,edge:f.value}),k=$=>h.emit.mouseLeave({event:$,edge:f.value}),P=$=>{m.value=!0,T($,!0)},F=$=>{m.value=!0,T($,!1)},R=$=>{var V;Yo.includes($.key)&&e.selectable&&($.key==="Escape"?((V=w.value)==null||V.blur(),u([d(e.id)])):n([d(e.id)]))};return()=>{if(!e.sourceNode||!e.targetNode)return null;let $;o.value===Me.Strict?$=e.sourceNode.handleBounds.source:$=[...e.sourceNode.handleBounds.source||[],...e.sourceNode.handleBounds.target||[]];const V=ri($,f.value.sourceHandle);let Z;o.value===Me.Strict?Z=e.targetNode.handleBounds.target:Z=[...e.targetNode.handleBounds.target||[],...e.targetNode.handleBounds.source||[]];const te=ri(Z,f.value.targetHandle),C=V?V.position:q.Bottom,H=te?te.position:q.Top,{sourceX:U,sourceY:x,targetY:N,targetX:D}=Hs(e.sourceNode,V,C,e.targetNode,te,H),L=f.value.class instanceof Function?f.value.class(f.value):f.value.class,j=f.value.style instanceof Function?f.value.style(f.value):f.value.style;return r.h("g",{ref:w,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,L,{updating:_.value,selected:f.value.selected,animated:f.value.animated,inactive:!e.selectable}],onClick:G,onContextmenu:X,onDblclick:Q,onMouseenter:v,onMousemove:z,onMouseleave:k,onKeyDown:e.focusable?R:void 0,tabIndex:e.focusable?0:void 0,"aria-label":f.value.ariaLabel===null?void 0:f.value.ariaLabel||`Edge from ${f.value.source} to ${f.value.target}`,"aria-describedby":e.focusable?`${Ho}-${t}`:void 0,role:e.focusable?"button":void 0},[m.value?null:r.h(e.type===!1?c.value.default:e.type,{id:e.id,sourceNode:e.sourceNode,targetNode:e.targetNode,source:f.value.source,target:f.value.target,type:f.value.type,updatable:e.updatable,selected:f.value.selected,animated:f.value.animated,label:f.value.label,labelStyle:f.value.labelStyle,labelShowBg:f.value.labelShowBg,labelBgStyle:f.value.labelBgStyle,labelBgPadding:f.value.labelBgPadding,labelBgBorderRadius:f.value.labelBgBorderRadius,data:f.value.data,events:{...f.value.events,...h.on},style:j,markerStart:`url(#${Ne(f.value.markerStart,t)})`,markerEnd:`url(#${Ne(f.value.markerEnd,t)})`,sourcePosition:C,targetPosition:H,sourceX:U,sourceY:x,targetX:D,targetY:N,sourceHandleId:f.value.sourceHandle,targetHandleId:f.value.targetHandle,interactionWidth:f.value.interactionWidth}),[e.updatable==="source"||e.updatable===!0?[r.h("g",{onMousedown:P,onMouseenter:M,onMouseout:y},r.h(oi,{position:C,centerX:U,centerY:x,radius:i.value,"data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[r.h("g",{onMousedown:F,onMouseenter:M,onMouseout:y},r.h(oi,{position:H,centerX:D,centerY:N,radius:i.value,"data-type":"target"}))]:null]])}}}),Ks={height:"0",width:"0"},Ws={name:"EdgeLabelRenderer"},Gs=r.defineComponent({...Ws,setup(e){const{viewportRef:t}=ne(),n=r.computed(()=>{var o;return(o=t.value)==null?void 0:o.getElementsByClassName("vue-flow__edge-labels")[0]});return(o,i)=>(r.openBlock(),r.createElementBlock("svg",null,[(r.openBlock(),r.createElementBlock("foreignObject",Ks,[(r.openBlock(),r.createBlock(r.Teleport,{to:r.unref(n),disabled:!r.unref(n)},[r.renderSlot(o.$slots,"default")],8,["to","disabled"]))]))]))}}),Us={class:"vue-flow__connection"},qs=["d","marker-end","marker-start"],js={name:"ConnectionLine"},Qs=r.defineComponent({...js,props:{sourceNode:null},setup(e){var I,A,T;const t=ne(),n=r.toRef(t,"getNodes"),o=r.toRef(t,"connectionMode"),i=r.toRef(t,"connectionStartHandle"),a=r.toRef(t,"connectionPosition"),s=r.toRef(t,"connectionLineType"),l=r.toRef(t,"connectionLineStyle"),c=r.toRef(t,"connectionLineOptions"),u=r.toRef(t,"viewport"),d=(I=r.inject(vt))==null?void 0:I["connection-line"],h=d==null?void 0:d({}),f=i.value.handleId;i.value.nodeId;const _=i.value.type,m=(o.value===Me.Strict?(A=e.sourceNode.handleBounds[_])==null?void 0:A.find(G=>G.id===f):[...e.sourceNode.handleBounds.source||[],...e.sourceNode.handleBounds.target||[]].find(G=>G.id===f))||((T=e.sourceNode.handleBounds[_!=null?_:"source"])==null?void 0:T[0]),g=m?m.x+m.width/2:e.sourceNode.dimensions.width/2,b=m?m.y+m.height/2:e.sourceNode.dimensions.height,p=e.sourceNode.computedPosition.x+g,E=e.sourceNode.computedPosition.y+b,w=(m==null?void 0:m.position)===q.Left||(m==null?void 0:m.position)===q.Right?q.Left:q.Top,M=r.computed(()=>(a.value.x-u.value.x)/u.value.zoom),y=r.computed(()=>(a.value.y-u.value.y)/u.value.zoom),B=r.computed(()=>{let G=`M${p},${E} ${M.value},${y.value}`;const X={sourceX:p,sourceY:E,sourcePosition:m==null?void 0:m.position,targetX:M.value,targetY:y.value,targetPosition:w};switch(s.value||c.value.type){case Se.Bezier:[G]=xn(X);break;case Se.Step:[G]=Ct({...X,borderRadius:0});break;case Se.SmoothStep:[G]=Ct(X);break;case Se.SimpleBezier:[G]=bn(X);break}return G});return(G,X)=>{var Q;return r.openBlock(),r.createElementBlock("g",Us,[r.unref(h)?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(r.unref(d)),r.normalizeProps(r.mergeProps({key:0},{sourceX:p,sourceY:E,sourcePosition:(Q=r.unref(m))==null?void 0:Q.position,targetX:M.value,targetY:y.value,targetPosition:r.unref(w),nodes:n.value,sourceNode:e.sourceNode,sourceHandle:r.unref(m),markerEnd:`url(#${r.unref(Ne)(c.value.markerEnd)})`,markerStart:`url(#${r.unref(Ne)(c.value.markerStart)})`})),null,16)):(r.openBlock(),r.createElementBlock("path",{key:1,d:r.unref(B),class:r.normalizeClass(["vue-flow__connection-path",c.value.class]),style:r.normalizeStyle(l.value||c.value.style||{}),"marker-end":`url(#${r.unref(Ne)(c.value.markerEnd)})`,"marker-start":`url(#${r.unref(Ne)(c.value.markerStart)})`},null,14,qs))])}}}),Js=["tabIndex"],el={name:"NodesSelection"},tl=r.defineComponent({...el,setup(e){const t=ne(),n=r.toRef(t,"emits"),o=r.toRef(t,"viewport"),i=r.toRef(t,"getSelectedNodes"),a=r.toRef(t,"noPanClassName"),s=r.toRef(t,"disableKeyboardA11y"),l=r.toRef(t,"userSelectionActive"),c=_o(),u=r.ref(),d=Lo({el:u,onStart(g,b,p){n.value.selectionDragStart({event:g,node:b,nodes:p})},onDrag(g,b,p){n.value.selectionDrag({event:g,node:b,nodes:p})},onStop(g,b,p){n.value.selectionDragStop({event:g,node:b,nodes:p})}});r.onMounted(()=>{var g;s.value||(g=u.value)==null||g.focus({preventScroll:!0})});const h=r.computed(()=>tn(i.value)),f=r.computed(()=>({width:`${h.value.width}px`,height:`${h.value.height}px`,top:`${h.value.y}px`,left:`${h.value.x}px`}));function _(g){n.value.selectionContextMenu({event:g,nodes:i.value})}function m(g){s.value||Ie[g.key]&&c({x:Ie[g.key].x,y:Ie[g.key].y},g.shiftKey)}return(g,b)=>!l.value&&h.value.width&&h.value.height?(r.openBlock(),r.createElementBlock("div",{key:0,class:r.normalizeClass(["vue-flow__nodesselection vue-flow__container",a.value]),style:r.normalizeStyle({transform:`translate(${o.value.x}px,${o.value.y}px) scale(${o.value.zoom})`})},[r.createElementVNode("div",{ref_key:"el",ref:u,class:r.normalizeClass([{dragging:r.unref(d)},"vue-flow__nodesselection-rect"]),style:r.normalizeStyle(r.unref(f)),tabIndex:s.value?void 0:-1,onContextmenu:_,onKeydown:m},null,46,Js)],6)):r.createCommentVNode("",!0)}}),nl=r.defineComponent({__name:"UserSelection",setup(e){const{userSelectionRect:t}=ne();return(n,o)=>{var i,a,s,l;return r.openBlock(),r.createElementBlock("div",{class:"vue-flow__selection react-flow__container",style:r.normalizeStyle({width:`${(i=r.unref(t))==null?void 0:i.width}px`,height:`${(a=r.unref(t))==null?void 0:a.height}px`,transform:`translate(${(s=r.unref(t))==null?void 0:s.x}px, ${(l=r.unref(t))==null?void 0:l.y}px)`})},null,4)}}}),ai={input:Pr,default:zr,output:Or},si={default:Go,straight:ti,step:Jo,smoothstep:Sn,simplebezier:qo},ol=()=>({vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:yt.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Ke.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:Se.Bezier,connectionLineOptions:{type:Se.Bezier,style:{}},connectionMode:Me.Loose,connectionStartHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectOnClick:!0,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:pr(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,disableKeyboardA11y:!1,ariaLiveMessage:"",__experimentalFeatures:{nestedFlow:!1},vueFlowVersion:"1.9.1"});function li(e){const t=ol();return e&&Object.keys(e).forEach(n=>{const o=e[n];ie(o)&&(t[n]=o)}),t}function il(e){const t=r.computed(()=>e.nodes.map(g=>g.id)),n=r.computed(()=>e.edges.map(g=>g.id)),o=r.computed(()=>g=>e.nodes&&!t.value.length?e.nodes.find(b=>b.id===g):e.nodes[t.value.indexOf(g)]),i=r.computed(()=>g=>e.edges&&!n.value.length?e.edges.find(b=>b.id===g):e.edges[n.value.indexOf(g)]),a=r.computed(()=>{var p;const g={...si,...e.edgeTypes},b=Object.keys(g);return(p=e.edges)==null||p.forEach(E=>E.type&&!b.includes(E.type)&&(g[E.type]=E.type)),g}),s=r.computed(()=>{var p;const g={...ai,...e.nodeTypes},b=Object.keys(g);return(p=e.nodes)==null||p.forEach(E=>E.type&&!b.includes(E.type)&&(g[E.type]=E.type)),g}),l=r.computed(()=>{const g=e.nodes.filter(b=>!b.hidden);return e.onlyRenderVisibleElements?g&&nn(g,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):g!=null?g:[]}),c=(g,b,p)=>{if(b=b!=null?b:o.value(g.source),p=p!=null?p:o.value(g.target),!b||!p){e.edges=e.edges.filter(E=>E.id!==g.id),ae(`Orphaned edge ${g.id} removed.`);return}return!g.hidden&&!p.hidden&&!b.hidden},u=r.computed(()=>e.onlyRenderVisibleElements?e.edges.filter(g=>{const b=o.value(g.source),p=o.value(g.target);return c(g,b,p)&&Ys({sourcePos:b.computedPosition||{x:0,y:0},targetPos:p.computedPosition||{x:0,y:0},sourceWidth:b.dimensions.width,sourceHeight:b.dimensions.height,targetWidth:p.dimensions.width,targetHeight:p.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(g=>c(g))),d=r.computed(()=>[...l.value,...u.value]),h=r.computed(()=>e.nodes.filter(g=>g.selected)),f=r.computed(()=>e.edges.filter(g=>g.selected)),_=r.computed(()=>{var g,b;return[...(g=h.value)!=null?g:[],...(b=f.value)!=null?b:[]]}),m=r.computed(()=>l.value.filter(g=>g.initialized));return{getNode:o,getEdge:i,getElements:d,getEdgeTypes:a,getNodeTypes:s,getEdges:u,getNodes:l,getSelectedElements:_,getSelectedNodes:h,getSelectedEdges:f,getNodesInitialized:m}}function $n(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ci(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Je(){}var et=.7,$t=1/et,De="\\s*([+-]?\\d+)\\s*",tt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rl=/^#([0-9a-f]{3,8})$/,al=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),sl=new RegExp(`^rgb\\(${ge},${ge},${ge}\\)$`),ll=new RegExp(`^rgba\\(${De},${De},${De},${tt}\\)$`),cl=new RegExp(`^rgba\\(${ge},${ge},${ge},${tt}\\)$`),ul=new RegExp(`^hsl\\(${tt},${ge},${ge}\\)$`),dl=new RegExp(`^hsla\\(${tt},${ge},${ge},${tt}\\)$`),ui={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$n(Je,nt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:di,formatHex:di,formatHex8:fl,formatHsl:hl,formatRgb:fi,toString:fi});function di(){return this.rgb().formatHex()}function fl(){return this.rgb().formatHex8()}function hl(){return yi(this).formatHsl()}function fi(){return this.rgb().formatRgb()}function nt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?hi(t):n===3?new se(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Mt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Mt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=al.exec(e))?new se(t[1],t[2],t[3],1):(t=sl.exec(e))?new se(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ll.exec(e))?Mt(t[1],t[2],t[3],t[4]):(t=cl.exec(e))?Mt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ul.exec(e))?pi(t[1],t[2]/100,t[3]/100,1):(t=dl.exec(e))?pi(t[1],t[2]/100,t[3]/100,t[4]):ui.hasOwnProperty(e)?hi(ui[e]):e==="transparent"?new se(NaN,NaN,NaN,0):null}function hi(e){return new se(e>>16&255,e>>8&255,e&255,1)}function Mt(e,t,n,o){return o<=0&&(e=t=n=NaN),new se(e,t,n,o)}function gl(e){return e instanceof Je||(e=nt(e)),e?(e=e.rgb(),new se(e.r,e.g,e.b,e.opacity)):new se}function Mn(e,t,n,o){return arguments.length===1?gl(e):new se(e,t,n,o==null?1:o)}function se(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}$n(se,Mn,ci(Je,{brighter(e){return e=e==null?$t:Math.pow($t,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?et:Math.pow(et,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new se(Be(this.r),Be(this.g),Be(this.b),Bt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gi,formatHex:gi,formatHex8:ml,formatRgb:mi,toString:mi}));function gi(){return`#${Re(this.r)}${Re(this.g)}${Re(this.b)}`}function ml(){return`#${Re(this.r)}${Re(this.g)}${Re(this.b)}${Re((isNaN(this.opacity)?1:this.opacity)*255)}`}function mi(){const e=Bt(this.opacity);return`${e===1?"rgb(":"rgba("}${Be(this.r)}, ${Be(this.g)}, ${Be(this.b)}${e===1?")":`, ${e})`}`}function Bt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Be(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Re(e){return e=Be(e),(e<16?"0":"")+e.toString(16)}function pi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ue(e,t,n,o)}function yi(e){if(e instanceof ue)return new ue(e.h,e.s,e.l,e.opacity);if(e instanceof Je||(e=nt(e)),!e)return new ue;if(e instanceof ue)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),s=NaN,l=a-i,c=(a+i)/2;return l?(t===a?s=(n-o)/l+(n<o)*6:n===a?s=(o-t)/l+2:s=(t-n)/l+4,l/=c<.5?a+i:2-a-i,s*=60):l=c>0&&c<1?0:s,new ue(s,l,c,e.opacity)}function pl(e,t,n,o){return arguments.length===1?yi(e):new ue(e,t,n,o==null?1:o)}function ue(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}$n(ue,pl,ci(Je,{brighter(e){return e=e==null?$t:Math.pow($t,e),new ue(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?et:Math.pow(et,e),new ue(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new se(Bn(e>=240?e-240:e+120,i,o),Bn(e,i,o),Bn(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new ue(vi(this.h),Rt(this.s),Rt(this.l),Bt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Bt(this.opacity);return`${e===1?"hsl(":"hsla("}${vi(this.h)}, ${Rt(this.s)*100}%, ${Rt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vi(e){return e=(e||0)%360,e<0?e+360:e}function Rt(e){return Math.max(0,Math.min(1,e||0))}function Bn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const wi=e=>()=>e;function yl(e,t){return function(n){return e+n*t}}function vl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function wl(e){return(e=+e)==1?xi:function(t,n){return n-t?vl(t,n,e):wi(isNaN(t)?n:t)}}function xi(e,t){var n=t-e;return n?yl(e,n):wi(isNaN(e)?t:e)}const _i=function e(t){var n=wl(t);function o(i,a){var s=n((i=Mn(i)).r,(a=Mn(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),u=xi(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return o.gamma=e,o}(1);function ke(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Rn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zn=new RegExp(Rn.source,"g");function xl(e){return function(){return e}}function _l(e){return function(t){return e(t)+""}}function bl(e,t){var n=Rn.lastIndex=zn.lastIndex=0,o,i,a,s=-1,l=[],c=[];for(e=e+"",t=t+"";(o=Rn.exec(e))&&(i=zn.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(o=o[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:ke(o,i)})),n=zn.lastIndex;return n<t.length&&(a=t.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?_l(c[0].x):xl(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}var bi=180/Math.PI,Pn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ei(e,t,n,o,i,a){var s,l,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*o)&&(n-=e*c,o-=t*c),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,c/=l),e*o<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*bi,skewX:Math.atan(c)*bi,scaleX:s,scaleY:l}}var zt;function El(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pn:Ei(t.a,t.b,t.c,t.d,t.e,t.f)}function Nl(e){return e==null||(zt||(zt=document.createElementNS("http://www.w3.org/2000/svg","g")),zt.setAttribute("transform",e),!(e=zt.transform.baseVal.consolidate()))?Pn:(e=e.matrix,Ei(e.a,e.b,e.c,e.d,e.e,e.f))}function Ni(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function a(u,d,h,f,_,m){if(u!==h||d!==f){var g=_.push("translate(",null,t,null,n);m.push({i:g-4,x:ke(u,h)},{i:g-2,x:ke(d,f)})}else(h||f)&&_.push("translate("+h+t+f+n)}function s(u,d,h,f){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,o)-2,x:ke(u,d)})):d&&h.push(i(h)+"rotate("+d+o)}function l(u,d,h,f){u!==d?f.push({i:h.push(i(h)+"skewX(",null,o)-2,x:ke(u,d)}):d&&h.push(i(h)+"skewX("+d+o)}function c(u,d,h,f,_,m){if(u!==h||d!==f){var g=_.push(i(_)+"scale(",null,",",null,")");m.push({i:g-4,x:ke(u,h)},{i:g-2,x:ke(d,f)})}else(h!==1||f!==1)&&_.push(i(_)+"scale("+h+","+f+")")}return function(u,d){var h=[],f=[];return u=e(u),d=e(d),a(u.translateX,u.translateY,d.translateX,d.translateY,h,f),s(u.rotate,d.rotate,h,f),l(u.skewX,d.skewX,h,f),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,f),u=d=null,function(_){for(var m=-1,g=f.length,b;++m<g;)h[(b=f[m]).i]=b.x(_);return h.join("")}}}var Sl=Ni(El,"px, ","px)","deg)"),kl=Ni(Nl,", ",")",")"),Cl=1e-12;function Si(e){return((e=Math.exp(e))+1/e)/2}function $l(e){return((e=Math.exp(e))-1/e)/2}function Ml(e){return((e=Math.exp(2*e))-1)/(e+1)}const Bl=function e(t,n,o){function i(a,s){var l=a[0],c=a[1],u=a[2],d=s[0],h=s[1],f=s[2],_=d-l,m=h-c,g=_*_+m*m,b,p;if(g<Cl)p=Math.log(f/u)/t,b=function(B){return[l+B*_,c+B*m,u*Math.exp(t*B*p)]};else{var E=Math.sqrt(g),S=(f*f-u*u+o*g)/(2*u*n*E),w=(f*f-u*u-o*g)/(2*f*n*E),M=Math.log(Math.sqrt(S*S+1)-S),y=Math.log(Math.sqrt(w*w+1)-w);p=(y-M)/t,b=function(B){var I=B*p,A=Si(M),T=u/(n*E)*(A*Ml(t*I+M)-$l(M));return[l+T*_,c+T*m,u*A/Si(t*I+M)]}}return b.duration=p*1e3*t/Math.SQRT2,b}return i.rho=function(a){var s=Math.max(.001,+a),l=s*s,c=l*l;return e(s,l,c)},i}(Math.SQRT2,2,4);var Ve=0,ot=0,it=0,ki=1e3,Pt,rt,Ot=0,ze=0,Tt=0,at=typeof performance=="object"&&performance.now?performance:Date,Ci=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function On(){return ze||(Ci(Rl),ze=at.now()+Tt)}function Rl(){ze=0}function At(){this._call=this._time=this._next=null}At.prototype=$i.prototype={constructor:At,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?On():+n)+(t==null?0:+t),!this._next&&rt!==this&&(rt?rt._next=this:Pt=this,rt=this),this._call=e,this._time=n,Tn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tn())}};function $i(e,t,n){var o=new At;return o.restart(e,t,n),o}function zl(){On(),++Ve;for(var e=Pt,t;e;)(t=ze-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ve}function Mi(){ze=(Ot=at.now())+Tt,Ve=ot=0;try{zl()}finally{Ve=0,Ol(),ze=0}}function Pl(){var e=at.now(),t=e-Ot;t>ki&&(Tt-=t,Ot=e)}function Ol(){for(var e,t=Pt,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Pt=n);rt=e,Tn(o)}function Tn(e){if(!Ve){ot&&(ot=clearTimeout(ot));var t=e-ze;t>24?(e<1/0&&(ot=setTimeout(Mi,e-at.now()-Tt)),it&&(it=clearInterval(it))):(it||(Ot=at.now(),it=setInterval(Pl,ki)),Ve=1,Ci(Mi))}}function Bi(e,t,n){var o=new At;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Tl=_t("start","end","cancel","interrupt"),Al=[],Ri=0,zi=1,An=2,It=3,Pi=4,In=5,Dt=6;function Vt(e,t,n,o,i,a){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Il(e,n,{name:t,index:o,group:i,on:Tl,tween:Al,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ri})}function Dn(e,t){var n=de(e,t);if(n.state>Ri)throw new Error("too late; already scheduled");return n}function me(e,t){var n=de(e,t);if(n.state>It)throw new Error("too late; already running");return n}function de(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Il(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=$i(a,0,n.time);function a(u){n.state=zi,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var d,h,f,_;if(n.state!==zi)return c();for(d in o)if(_=o[d],_.name===n.name){if(_.state===It)return Bi(s);_.state===Pi?(_.state=Dt,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete o[d]):+d<t&&(_.state=Dt,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete o[d])}if(Bi(function(){n.state===It&&(n.state=Pi,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=An,n.on.call("start",e,e.__data__,n.index,n.group),n.state===An){for(n.state=It,i=new Array(f=n.tween.length),d=0,h=-1;d<f;++d)(_=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=_);i.length=h+1}}function l(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=In,1),h=-1,f=i.length;++h<f;)i[h].call(e,d);n.state===In&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Dt,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Lt(e,t){var n=e.__transition,o,i,a=!0,s;if(!!n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){a=!1;continue}i=o.state>An&&o.state<In,o.state=Dt,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}a&&delete e.__transition}}function Dl(e){return this.each(function(){Lt(this,e)})}function Vl(e,t){var n,o;return function(){var i=me(this,e),a=i.tween;if(a!==n){o=n=a;for(var s=0,l=o.length;s<l;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}i.tween=o}}function Ll(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=me(this,e),s=a.tween;if(s!==o){i=(o=s).slice();for(var l={name:t,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===t){i[c]=l;break}c===u&&i.push(l)}a.tween=i}}function Fl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=de(this.node(),n).tween,i=0,a=o.length,s;i<a;++i)if((s=o[i]).name===e)return s.value;return null}return this.each((t==null?Vl:Ll)(n,e,t))}function Vn(e,t,n){var o=e._id;return e.each(function(){var i=me(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return de(i,o).value[t]}}function Oi(e,t){var n;return(typeof t=="number"?ke:t instanceof nt?_i:(n=nt(t))?(t=n,_i):bl)(e,t)}function Hl(e){return function(){this.removeAttribute(e)}}function Yl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xl(e,t,n){var o,i=n+"",a;return function(){var s=this.getAttribute(e);return s===i?null:s===o?a:a=t(o=s,n)}}function Zl(e,t,n){var o,i=n+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===o?a:a=t(o=s,n)}}function Kl(e,t,n){var o,i,a;return function(){var s,l=n(this),c;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=l+"",s===c?null:s===o&&c===i?a:(i=c,a=t(o=s,l)))}}function Wl(e,t,n){var o,i,a;return function(){var s,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=l+"",s===c?null:s===o&&c===i?a:(i=c,a=t(o=s,l)))}}function Gl(e,t){var n=Et(e),o=n==="transform"?kl:Oi;return this.attrTween(e,typeof t=="function"?(n.local?Wl:Kl)(n,o,Vn(this,"attr."+e,t)):t==null?(n.local?Yl:Hl)(n):(n.local?Zl:Xl)(n,o,t))}function Ul(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ql(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function jl(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&ql(e,a)),n}return i._value=t,i}function Ql(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Ul(e,a)),n}return i._value=t,i}function Jl(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Et(e);return this.tween(n,(o.local?jl:Ql)(o,t))}function ec(e,t){return function(){Dn(this,e).delay=+t.apply(this,arguments)}}function tc(e,t){return t=+t,function(){Dn(this,e).delay=t}}function nc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ec:tc)(t,e)):de(this.node(),t).delay}function oc(e,t){return function(){me(this,e).duration=+t.apply(this,arguments)}}function ic(e,t){return t=+t,function(){me(this,e).duration=t}}function rc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?oc:ic)(t,e)):de(this.node(),t).duration}function ac(e,t){if(typeof t!="function")throw new Error;return function(){me(this,e).ease=t}}function sc(e){var t=this._id;return arguments.length?this.each(ac(t,e)):de(this.node(),t).ease}function lc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;me(this,e).ease=n}}function cc(e){if(typeof e!="function")throw new Error;return this.each(lc(this._id,e))}function uc(e){typeof e!="function"&&(e=$o(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,l=o[i]=[],c,u=0;u<s;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&l.push(c);return new ye(o,this._parents,this._name,this._id)}function dc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),s=new Array(o),l=0;l<a;++l)for(var c=t[l],u=n[l],d=c.length,h=s[l]=new Array(d),f,_=0;_<d;++_)(f=c[_]||u[_])&&(h[_]=f);for(;l<o;++l)s[l]=t[l];return new ye(s,this._parents,this._name,this._id)}function fc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function hc(e,t,n){var o,i,a=fc(t)?Dn:me;return function(){var s=a(this,e),l=s.on;l!==o&&(i=(o=l).copy()).on(t,n),s.on=i}}function gc(e,t){var n=this._id;return arguments.length<2?de(this.node(),n).on.on(e):this.each(hc(n,e,t))}function mc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function pc(){return this.on("end.remove",mc(this._id))}function yc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=gn(e));for(var o=this._groups,i=o.length,a=new Array(i),s=0;s<i;++s)for(var l=o[s],c=l.length,u=a[s]=new Array(c),d,h,f=0;f<c;++f)(d=l[f])&&(h=e.call(d,d.__data__,f,l))&&("__data__"in d&&(h.__data__=d.__data__),u[f]=h,Vt(u[f],t,n,f,u,de(d,n)));return new ye(a,this._parents,t,n)}function vc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Co(e));for(var o=this._groups,i=o.length,a=[],s=[],l=0;l<i;++l)for(var c=o[l],u=c.length,d,h=0;h<u;++h)if(d=c[h]){for(var f=e.call(d,d.__data__,h,c),_,m=de(d,n),g=0,b=f.length;g<b;++g)(_=f[g])&&Vt(_,t,n,g,f,m);a.push(f),s.push(d)}return new ye(a,s,t,n)}var wc=Ue.prototype.constructor;function xc(){return new wc(this._groups,this._parents)}function _c(e,t){var n,o,i;return function(){var a=Te(this,e),s=(this.style.removeProperty(e),Te(this,e));return a===s?null:a===n&&s===o?i:i=t(n=a,o=s)}}function Ti(e){return function(){this.style.removeProperty(e)}}function bc(e,t,n){var o,i=n+"",a;return function(){var s=Te(this,e);return s===i?null:s===o?a:a=t(o=s,n)}}function Ec(e,t,n){var o,i,a;return function(){var s=Te(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Te(this,e))),s===c?null:s===o&&c===i?a:(i=c,a=t(o=s,l))}}function Nc(e,t){var n,o,i,a="style."+t,s="end."+a,l;return function(){var c=me(this,e),u=c.on,d=c.value[a]==null?l||(l=Ti(t)):void 0;(u!==n||i!==d)&&(o=(n=u).copy()).on(s,i=d),c.on=o}}function Sc(e,t,n){var o=(e+="")=="transform"?Sl:Oi;return t==null?this.styleTween(e,_c(e,o)).on("end.style."+e,Ti(e)):typeof t=="function"?this.styleTween(e,Ec(e,o,Vn(this,"style."+e,t))).each(Nc(this._id,e)):this.styleTween(e,bc(e,o,t),n).on("end.style."+e,null)}function kc(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Cc(e,t,n){var o,i;function a(){var s=t.apply(this,arguments);return s!==i&&(o=(i=s)&&kc(e,s,n)),o}return a._value=t,a}function $c(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Cc(e,t,n==null?"":n))}function Mc(e){return function(){this.textContent=e}}function Bc(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Rc(e){return this.tween("text",typeof e=="function"?Bc(Vn(this,"text",e)):Mc(e==null?"":e+""))}function zc(e){return function(t){this.textContent=e.call(this,t)}}function Pc(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&zc(i)),t}return o._value=e,o}function Oc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Pc(e))}function Tc(){for(var e=this._name,t=this._id,n=Ai(),o=this._groups,i=o.length,a=0;a<i;++a)for(var s=o[a],l=s.length,c,u=0;u<l;++u)if(c=s[u]){var d=de(c,t);Vt(c,e,n,u,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new ye(o,this._parents,e,n)}function Ac(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,s){var l={value:s},c={value:function(){--i===0&&a()}};n.each(function(){var u=me(this,o),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),i===0&&a()})}var Ic=0;function ye(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Ai(){return++Ic}var ve=Ue.prototype;ye.prototype={constructor:ye,select:yc,selectAll:vc,selectChild:ve.selectChild,selectChildren:ve.selectChildren,filter:uc,merge:dc,selection:xc,transition:Tc,call:ve.call,nodes:ve.nodes,node:ve.node,size:ve.size,empty:ve.empty,each:ve.each,on:gc,attr:Gl,attrTween:Jl,style:Sc,styleTween:$c,text:Rc,textTween:Oc,remove:pc,tween:Fl,delay:nc,duration:rc,ease:sc,easeVarying:cc,end:Ac,[Symbol.iterator]:ve[Symbol.iterator]};function Dc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Vc={time:null,delay:0,duration:250,ease:Dc};function Lc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Fc(e){var t,n;e instanceof ye?(t=e._id,e=e._name):(t=Ai(),(n=Vc).time=On(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var s=o[a],l=s.length,c,u=0;u<l;++u)(c=s[u])&&Vt(c,e,t,u,s,n||Lc(c,t));return new ye(o,this._parents,e,t)}Ue.prototype.interrupt=Dl,Ue.prototype.transition=Fc;const Ft=e=>()=>e;function Hc(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function we(e,t,n){this.k=e,this.x=t,this.y=n}we.prototype={constructor:we,scale:function(e){return e===1?this:new we(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new we(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ht=new we(1,0,0);we.prototype;function Ln(e){e.stopImmediatePropagation()}function st(e){e.preventDefault(),e.stopImmediatePropagation()}function Yc(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Xc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ii(){return this.__zoom||Ht}function Zc(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Kc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wc(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function Gc(){var e=Yc,t=Xc,n=Wc,o=Zc,i=Kc,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,c=Bl,u=_t("start","zoom","end"),d,h,f,_=500,m=150,g=0,b=10;function p(v){v.property("__zoom",Ii).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",T).filter(i).on("touchstart.zoom",G).on("touchmove.zoom",X).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(v,z,k,P){var F=v.selection?v.selection():v;F.property("__zoom",Ii),v!==F?M(v,z,k,P):F.interrupt().each(function(){y(this,arguments).event(P).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},p.scaleBy=function(v,z,k,P){p.scaleTo(v,function(){var F=this.__zoom.k,R=typeof z=="function"?z.apply(this,arguments):z;return F*R},k,P)},p.scaleTo=function(v,z,k,P){p.transform(v,function(){var F=t.apply(this,arguments),R=this.__zoom,$=k==null?w(F):typeof k=="function"?k.apply(this,arguments):k,V=R.invert($),Z=typeof z=="function"?z.apply(this,arguments):z;return n(S(E(R,Z),$,V),F,s)},k,P)},p.translateBy=function(v,z,k,P){p.transform(v,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),s)},null,P)},p.translateTo=function(v,z,k,P,F){p.transform(v,function(){var R=t.apply(this,arguments),$=this.__zoom,V=P==null?w(R):typeof P=="function"?P.apply(this,arguments):P;return n(Ht.translate(V[0],V[1]).scale($.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof k=="function"?-k.apply(this,arguments):-k),R,s)},P,F)};function E(v,z){return z=Math.max(a[0],Math.min(a[1],z)),z===v.k?v:new we(z,v.x,v.y)}function S(v,z,k){var P=z[0]-k[0]*v.k,F=z[1]-k[1]*v.k;return P===v.x&&F===v.y?v:new we(v.k,P,F)}function w(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function M(v,z,k,P){v.on("start.zoom",function(){y(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){y(this,arguments).event(P).end()}).tween("zoom",function(){var F=this,R=arguments,$=y(F,R).event(P),V=t.apply(F,R),Z=k==null?w(V):typeof k=="function"?k.apply(F,R):k,te=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),C=F.__zoom,H=typeof z=="function"?z.apply(F,R):z,U=c(C.invert(Z).concat(te/C.k),H.invert(Z).concat(te/H.k));return function(x){if(x===1)x=H;else{var N=U(x),D=te/N[2];x=new we(D,Z[0]-N[0]*D,Z[1]-N[1]*D)}$.zoom(null,x)}})}function y(v,z,k){return!k&&v.__zooming||new B(v,z)}function B(v,z){this.that=v,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,z),this.taps=0}B.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,z){return this.mouse&&v!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var z=ce(this.that).datum();u.call(v,this.that,new Hc(v,{sourceEvent:this.sourceEvent,target:p,type:v,transform:this.that.__zoom,dispatch:u}),z)}};function I(v,...z){if(!e.apply(this,arguments))return;var k=y(this,z).event(v),P=this.__zoom,F=Math.max(a[0],Math.min(a[1],P.k*Math.pow(2,o.apply(this,arguments)))),R=he(v);if(k.wheel)(k.mouse[0][0]!==R[0]||k.mouse[0][1]!==R[1])&&(k.mouse[1]=P.invert(k.mouse[0]=R)),clearTimeout(k.wheel);else{if(P.k===F)return;k.mouse=[R,P.invert(R)],Lt(this),k.start()}st(v),k.wheel=setTimeout($,m),k.zoom("mouse",n(S(E(P,F),k.mouse[0],k.mouse[1]),k.extent,s));function $(){k.wheel=null,k.end()}}function A(v,...z){if(f||!e.apply(this,arguments))return;var k=v.currentTarget,P=y(this,z,!0).event(v),F=ce(v.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",te,!0),R=he(v,k),$=v.clientX,V=v.clientY;Do(v.view),Ln(v),P.mouse=[R,this.__zoom.invert(R)],Lt(this),P.start();function Z(C){if(st(C),!P.moved){var H=C.clientX-$,U=C.clientY-V;P.moved=H*H+U*U>g}P.event(C).zoom("mouse",n(S(P.that.__zoom,P.mouse[0]=he(C,k),P.mouse[1]),P.extent,s))}function te(C){F.on("mousemove.zoom mouseup.zoom",null),Vo(C.view,P.moved),st(C),P.event(C).end()}}function T(v,...z){if(!!e.apply(this,arguments)){var k=this.__zoom,P=he(v.changedTouches?v.changedTouches[0]:v,this),F=k.invert(P),R=k.k*(v.shiftKey?.5:2),$=n(S(E(k,R),P,F),t.apply(this,z),s);st(v),l>0?ce(this).transition().duration(l).call(M,$,P,v):ce(this).call(p.transform,$,P,v)}}function G(v,...z){if(!!e.apply(this,arguments)){var k=v.touches,P=k.length,F=y(this,z,v.changedTouches.length===P).event(v),R,$,V,Z;for(Ln(v),$=0;$<P;++$)V=k[$],Z=he(V,this),Z=[Z,this.__zoom.invert(Z),V.identifier],F.touch0?!F.touch1&&F.touch0[2]!==Z[2]&&(F.touch1=Z,F.taps=0):(F.touch0=Z,R=!0,F.taps=1+!!d);d&&(d=clearTimeout(d)),R&&(F.taps<2&&(h=Z[0],d=setTimeout(function(){d=null},_)),Lt(this),F.start())}}function X(v,...z){if(!!this.__zooming){var k=y(this,z).event(v),P=v.changedTouches,F=P.length,R,$,V,Z;for(st(v),R=0;R<F;++R)$=P[R],V=he($,this),k.touch0&&k.touch0[2]===$.identifier?k.touch0[0]=V:k.touch1&&k.touch1[2]===$.identifier&&(k.touch1[0]=V);if($=k.that.__zoom,k.touch1){var te=k.touch0[0],C=k.touch0[1],H=k.touch1[0],U=k.touch1[1],x=(x=H[0]-te[0])*x+(x=H[1]-te[1])*x,N=(N=U[0]-C[0])*N+(N=U[1]-C[1])*N;$=E($,Math.sqrt(x/N)),V=[(te[0]+H[0])/2,(te[1]+H[1])/2],Z=[(C[0]+U[0])/2,(C[1]+U[1])/2]}else if(k.touch0)V=k.touch0[0],Z=k.touch0[1];else return;k.zoom("touch",n(S($,V,Z),k.extent,s))}}function Q(v,...z){if(!!this.__zooming){var k=y(this,z).event(v),P=v.changedTouches,F=P.length,R,$;for(Ln(v),f&&clearTimeout(f),f=setTimeout(function(){f=null},_),R=0;R<F;++R)$=P[R],k.touch0&&k.touch0[2]===$.identifier?delete k.touch0:k.touch1&&k.touch1[2]===$.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&($=he($,this),Math.hypot(h[0]-$[0],h[1]-$[1])<b)){var V=ce(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return p.wheelDelta=function(v){return arguments.length?(o=typeof v=="function"?v:Ft(+v),p):o},p.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Ft(!!v),p):e},p.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:Ft(!!v),p):i},p.extent=function(v){return arguments.length?(t=typeof v=="function"?v:Ft([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),p):t},p.scaleExtent=function(v){return arguments.length?(a[0]=+v[0],a[1]=+v[1],p):[a[0],a[1]]},p.translateExtent=function(v){return arguments.length?(s[0][0]=+v[0][0],s[1][0]=+v[1][0],s[0][1]=+v[0][1],s[1][1]=+v[1][1],p):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},p.constrain=function(v){return arguments.length?(n=v,p):n},p.duration=function(v){return arguments.length?(l=+v,p):l},p.interpolate=function(v){return arguments.length?(c=v,p):c},p.on=function(){var v=u.on.apply(u,arguments);return v===u?p:v},p.clickDistance=function(v){return arguments.length?(g=(v=+v)*v,p):Math.sqrt(g)},p.tapDistance=function(v){return arguments.length?(b=+v,p):b},p}const Fn=.1,Hn=(e,t=0)=>e.transition().duration(t),Le=async(e,t)=>{const n=Xe();return"screen"in n&&(await $e(e).toMatch(({height:o,width:i})=>!isNaN(i)&&i>0&&!isNaN(o)&&o>0),t.length>0&&await $e(t).toMatch(o=>!!o.filter(({dimensions:{width:i,height:a}})=>!isNaN(i)&&i>0&&!isNaN(a)&&a>0).length)),!0},Di=e=>{const t=ne({id:e}),n=r.toRef(t,"onPaneReady"),o=r.toRef(t,"nodes"),i=r.toRef(t,"d3Zoom"),a=r.toRef(t,"d3Selection"),s=r.toRef(t,"dimensions"),l=r.toRef(t,"translateExtent"),c=r.toRef(t,"minZoom"),u=r.toRef(t,"maxZoom"),d=r.toRef(t,"viewport"),h=r.toRef(t,"snapToGrid"),f=r.toRef(t,"snapGrid"),_=r.toRef(t,"getNodes");let m=r.ref(!1);n.value(()=>m.value=!0);const g=async(w,M)=>{m.value||await Le(s.value,_.value),a.value&&i.value&&i.value.scaleTo(Hn(a.value,M==null?void 0:M.duration),w)},b=async(w,M)=>{m.value||await Le(s.value,_.value),a.value&&i.value&&i.value.scaleBy(Hn(a.value,M),w)},p=async w=>{await b(1.2,w==null?void 0:w.duration)},E=async w=>{await b(1/1.2,w==null?void 0:w.duration)},S=(w,M,y,B)=>{const{x:I,y:A}=ao({x:-w,y:-M},l.value),T=Ht.translate(-I,-A).scale(y);a.value&&i.value&&i.value.transform(Hn(a.value,B),T)};return{zoomIn:p,zoomOut:E,zoomTo:g,setTransform:async(w,M)=>{m.value||await Le(s.value,_.value),S(w.x,w.y,w.zoom,M==null?void 0:M.duration)},getTransform:()=>({x:d.value.x,y:d.value.y,zoom:d.value.zoom}),fitView:async(w={padding:Fn,includeHiddenNodes:!1,duration:0})=>{var T,G,X;if(m.value||await Le(s.value,_.value),!_.value.length)return;let M=[];w.nodes&&(M=o.value.filter(Q=>{var v;return(v=w.nodes)==null?void 0:v.includes(Q.id)})),(!M||!M.length)&&(M=w.includeHiddenNodes?M:_.value);const y=tn(M),{x:B,y:I,zoom:A}=on(y,s.value.width,s.value.height,(T=w.minZoom)!=null?T:c.value,(G=w.maxZoom)!=null?G:u.value,(X=w.padding)!=null?X:Fn,w.offset);S(B,I,A,w==null?void 0:w.duration)},setCenter:async(w,M,y)=>{m.value||await Le(s.value,_.value);const B=typeof(y==null?void 0:y.zoom)<"u"?y.zoom:u.value,I=s.value.width/2-w*B,A=s.value.height/2-M*B;S(I,A,B,y==null?void 0:y.duration)},fitBounds:async(w,M={padding:Fn})=>{m.value||await Le(s.value,_.value);const{x:y,y:B,zoom:I}=on(w,s.value.width,s.value.height,c.value,u.value,M.padding);S(y,B,I,M==null?void 0:M.duration)},project:w=>lo(w,d.value,h.value,f.value)}};function Vi(e,t){var n,o;if(t){const i=e.position.x+e.dimensions.width-t.dimensions.width,a=e.position.y+e.dimensions.height-t.dimensions.height;if(i>0||a>0||e.position.x<0||e.position.y<0){if(t.style?pe(t.style)&&(t.style={...t.style(t)}):t.style={},t.style.width=(n=t.style.width)!=null?n:t.dimensions.width,t.style.height=(o=t.style.height)!=null?o:t.dimensions.height,i>0)if(be(t.style.width)){const s=Number(t.style.width.replace("px",""));t.style.width=`${s+i}px`}else t.style.width+=i;if(a>0)if(be(t.style.height)){const s=Number(t.style.height.replace("px",""));t.style.height=`${s+a}px`}else t.style.height+=a;if(e.position.x<0){const s=Math.abs(e.position.x);if(t.position.x=t.position.x-s,be(t.style.width)){const l=Number(t.style.width.replace("px",""));t.style.width=`${l+s}px`}else t.style.width+=s;e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);if(t.position.y=t.position.y-s,be(t.style.height)){const l=Number(t.style.height.replace("px",""));t.style.height=`${l+s}px`}else t.style.height+=s;e.position.y=0}t.dimensions.width=Number(t.style.width.toString().replace("px","")),t.dimensions.height=Number(t.style.height.toString().replace("px",""))}}}const lt=(e,t)=>{e.filter(i=>i.type==="add"||i.type==="remove").forEach(i=>{switch(i.type){case"add":t.push(i.item);break;case"remove":t.splice(t.findIndex(a=>a.id===i.id),1);break}});const o=t.map(i=>i.id);return t.forEach(i=>{var s,l;const a=e.filter(c=>c.id===i.id);for(const c of a)switch(c.type){case"select":i.selected=c.selected;break;case"position":if(Ee(i)&&(typeof c.position<"u"&&(i.position=c.position),typeof c.dragging<"u"&&(i.dragging=c.dragging),i.expandParent&&i.parentNode)){const u=t[o.indexOf(i.parentNode)];u&&Ee(u)&&Vi(i,u)}break;case"dimensions":if(Ee(i)&&(typeof c.dimensions<"u"&&(i.dimensions=c.dimensions),typeof c.updateStyle<"u"&&(i.style={...i.style||{},width:`${(s=c.dimensions)==null?void 0:s.width}px`,height:`${(l=c.dimensions)==null?void 0:l.height}px`}),typeof c.resizing=="boolean"&&(i.resizing=c.resizing),i.expandParent&&i.parentNode)){const u=t[o.indexOf(i.parentNode)];u&&Ee(u)&&Vi(i,u)}break}}),t},Uc=(e,t)=>lt(e,t),qc=(e,t)=>lt(e,t),xe=(e,t)=>({id:e,type:"select",selected:t}),Li=e=>({item:e,type:"add"}),Yn=e=>({id:e,type:"remove"}),Xn=(e,t)=>e.reduce((n,o)=>{const i=t.includes(o.id),a=Ee(o)?"changedNodes":"changedEdges";return!o.selected&&i?n[a].push(xe(o.id,!0)):o.selected&&!i&&n[a].push(xe(o.id,!1)),n},{changedNodes:[],changedEdges:[]});function jc(e,t){const n=x=>{e.hooks.updateNodeInternals.trigger(x)},o=r.ref();e.hooks.paneReady.on(({id:x})=>{o.value=Di(x)});const i=async()=>new Promise(x=>{o.value?x(o.value):$e(o).not.toBeUndefined().then(()=>x(o.value))}),a=r.computed(()=>e.nodes.map(x=>x.id)),s=r.computed(()=>e.edges.map(x=>x.id)),l=x=>e.nodes&&!a.value.length?e.nodes.find(N=>N.id===x):e.nodes[a.value.indexOf(x)],c=x=>e.edges&&!s.value.length?e.edges.find(N=>N.id===x):e.edges[s.value.indexOf(x)],u=(x,N,D)=>{const L=[];x.forEach(j=>{var ee,O,J,oe;const K={id:j.id,type:"position",dragging:D,from:j.from};if(N&&(K.position=j.position,j.parentNode)){const re=l(j.parentNode);K.position={x:K.position.x-((O=(ee=re==null?void 0:re.computedPosition)==null?void 0:ee.x)!=null?O:0),y:K.position.y-((oe=(J=re==null?void 0:re.computedPosition)==null?void 0:J.y)!=null?oe:0)}}L.push(K)}),L!=null&&L.length&&e.hooks.nodesChange.trigger(L)},d=x=>{var j;if(!e.vueFlowRef)return;const N=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!N)return;let D;if((j=e.__experimentalFeatures)!=null&&j.nestedFlow){let K=[N],ee=N,O;for(;!O&&ee;)ee=ee.parentElement,O=ee==null?void 0:ee.classList.contains("vue-flow__transformationpane"),O&&(K=[ee,...K]);K.forEach(J=>{const oe=window.getComputedStyle(J),{m22:re}=new window.DOMMatrixReadOnly(oe.transform);D?D*=re:D=re})}else{const K=window.getComputedStyle(N),{m22:ee}=new window.DOMMatrixReadOnly(K.transform);D=ee}const L=x.reduce((K,ee)=>{const O=t.getNode.value(ee.id);if(O){const J=dt(ee.nodeElement);!!(J.width&&J.height&&(O.width!==J.width||O.height!==J.height||ee.forceUpdate))&&(O.handleBounds.source=Eo(".source",ee.nodeElement,D),O.handleBounds.target=Eo(".target",ee.nodeElement,D),O.initialized||(O.initialized=!0),K.push({id:O.id,type:"dimensions",dimensions:J}))}return K},[]);L.length&&e.hooks.nodesChange.trigger(L)},h=(x,N)=>{const D=x.map(K=>K.id);let L,j=[];if(e.multiSelectionActive)L=D.map(K=>xe(K,N));else{const K=Xn([...e.nodes,...e.edges],D);L=K.changedNodes,j=K.changedEdges}L.length&&e.hooks.nodesChange.trigger(L),j.length&&e.hooks.edgesChange.trigger(j)},f=(x,N)=>{const D=x.map(K=>K.id);let L=[],j;if(e.multiSelectionActive)j=D.map(K=>xe(K,N));else{const K=Xn([...e.nodes,...e.edges],D);L=K.changedNodes,j=K.changedEdges}L.length&&e.hooks.nodesChange.trigger(L),j.length&&e.hooks.edgesChange.trigger(j)},_=(x,N)=>{const D=x.filter(Ee),L=x.filter(Jt),j=D.map(J=>J.id),K=L.map(J=>J.id);let{changedNodes:ee,changedEdges:O}=Xn([...e.nodes,...e.edges],[...j,...K]);e.multiSelectionActive&&(ee=j.map(J=>xe(J,N))),e.multiSelectionActive&&(O=K.map(J=>xe(J,N))),ee.length&&e.hooks.nodesChange.trigger(ee),O.length&&e.hooks.edgesChange.trigger(O)},m=x=>{h(x,!0)},g=x=>{f(x,!0)},b=x=>{_(x,!0)},p=x=>{if(!x.length)return h(x,!1);const D=x.map(L=>L.id).map(L=>xe(L,!1));D.length&&e.hooks.nodesChange.trigger(D)},E=x=>{if(!x.length)return f(x,!1);const D=x.map(L=>L.id).map(L=>xe(L,!1));D.length&&e.hooks.edgesChange.trigger(D)},S=x=>{if(!x||!x.length)return _([],!1);const{changedNodes:N,changedEdges:D}=x.reduce((L,j)=>{const K=xe(j.id,!1);return Ee(j)?L.changedNodes.push(K):L.changedEdges.push(K),L},{changedNodes:[],changedEdges:[]});N.length&&e.hooks.nodesChange.trigger(N),D.length&&e.hooks.edgesChange.trigger(D)},w=x=>{var N;(N=e.d3Zoom)==null||N.scaleExtent([x,e.maxZoom]),e.minZoom=x},M=x=>{var N;(N=e.d3Zoom)==null||N.scaleExtent([e.minZoom,x]),e.maxZoom=x},y=x=>{var N;(N=e.d3Zoom)==null||N.translateExtent(x),e.translateExtent=x},B=async x=>{if(e.nodeExtent=x,o.value){const N=t.getNodes.value.map(D=>D.id);n(N)}},I=x=>{e.nodesDraggable=x,e.nodesConnectable=x,e.elementsSelectable=x},A=(x,N)=>{if(!e.initialized&&!x.length)return;e.nodes||(e.nodes=[]);const D=x instanceof Function?x(e.nodes):x;e.nodes=ho(D,t.getNode.value,e.nodes,N!=null?N:e.nodeExtent)},T=x=>{if(!e.initialized&&!x.length)return;const N=x instanceof Function?x(e.edges):x;e.edges=N.reduce((D,L)=>{const j=t.getNode.value(L.source),K=t.getNode.value(L.target),ee=!j||typeof j>"u",O=!K||typeof K>"u";if(ee&&ae(`Couldn't create edge for source id: ${L.source}; edge id: ${L.id}`),O&&ae(`Couldn't create edge for target id: ${L.target}; edge id: ${L.id}`),ee||O)return D;const J=t.getEdge.value(L.id);return D.push({...en(L,Object.assign({},J,e.defaultEdgeOptions)),sourceNode:j,targetNode:K}),D},[])},G=(x,N)=>{if(!e.initialized&&!x.length||!x)return;const D=x instanceof Function?x([...e.nodes,...e.edges]):x;A(D.filter(ht),N),T(D.filter(fe))},X=(x,N)=>{const D=x instanceof Function?x(e.nodes):x,j=ho(D,t.getNode.value,e.nodes,N!=null?N:e.nodeExtent).map(Li);j.length&&e.hooks.nodesChange.trigger(j)},Q=x=>{const D=(x instanceof Function?x(e.edges):x).reduce((L,j)=>{const K=$r({...j,...e.defaultEdgeOptions},e.edges);if(K){const ee=t.getNode.value(K.source),O=t.getNode.value(K.target),J=!ee||typeof ee>"u",oe=!O||typeof O>"u";if(J&&ae(`Couldn't create edge for source id: ${K.source}; edge id: ${K.id}`),oe&&ae(`Couldn't create edge for target id: ${K.target}; edge id: ${K.id}`),oe||J)return L;L.push(Li({...K,sourceNode:ee,targetNode:O}))}return L},[]);D.length&&e.hooks.edgesChange.trigger(D)},v=(x,N=!0)=>{const D=x instanceof Function?x(e.nodes):x,L=[],j=[];D.forEach(K=>{if(L.push(Yn(typeof K=="string"?K:K.id)),N){const ee=Ze([typeof K=="string"?{id:K}:K],e.edges);j.push(...ee.map(O=>Yn(O.id)))}}),L.length&&e.hooks.nodesChange.trigger(L),j.length&&e.hooks.edgesChange.trigger(j)},z=x=>{const N=x instanceof Function?x(e.edges):x,D=[];N.forEach(L=>{D.push(Yn(typeof L=="string"?L:L.id))}),e.hooks.edgesChange.trigger(D)},k=(x,N)=>Mr(x,N,e.edges),P=x=>lt(x,e.nodes),F=x=>lt(x,e.edges),R=(x,N,D,L=!1)=>{L?e.connectionClickStartHandle=x:e.connectionStartHandle=x,N&&(e.connectionPosition=N),e.hooks.connectStart.trigger({event:D,nodeId:x.nodeId,handleId:x.handleId,handleType:x.type})},$=x=>{e.connectionPosition=x},V=(x,N)=>{e.connectionPosition={x:NaN,y:NaN},N?e.connectionClickStartHandle=null:e.connectionStartHandle=null,e.hooks.connectEnd.trigger(x)},Z=x=>{const N=wr(x),D=N?null:l(x.id);return!N&&!D?[null,null,N]:[N?x:ro(D),D,N]},te=(x,N=!0,D)=>{const[L,j,K]=Z(x);return L?(D||e.nodes).filter(ee=>{if(!K&&(ee.id===j.id||!ee.computedPosition))return!1;const O=ro(ee),J=jt(O,L);return N&&J>0||J>=Number(x.width)*Number(x.height)}):[]},C=(x,N,D=!0)=>{const[L]=Z(x);if(!L)return!1;const j=jt(L,N);return D&&j>0||j>=Number(x.width)*Number(x.height)},H=x=>{var j,K;const N=x instanceof Function?x(e):x,D=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks"];typeof N.modelValue<"u"&&G(N.modelValue,(j=N.nodeExtent)!=null?j:e.nodeExtent),typeof N.nodes<"u"&&A(N.nodes,(K=N.nodeExtent)!=null?K:e.nodeExtent),typeof N.edges<"u"&&T(N.edges);const L=()=>{typeof N.maxZoom<"u"&&M(N.maxZoom),typeof N.minZoom<"u"&&w(N.minZoom),typeof N.translateExtent<"u"&&y(N.translateExtent),typeof N.nodeExtent<"u"&&B(N.nodeExtent)};Object.keys(N).forEach(ee=>{const O=N[ee];!D.includes(ee)&&ie(O)&&(e[ee]=O)}),e.d3Zoom?L():$e(()=>e.d3Zoom).not.toBeUndefined().then(L),e.initialized||(e.initialized=!0)};return{updateNodePositions:u,updateNodeDimensions:d,setElements:G,setNodes:A,setEdges:T,addNodes:X,addEdges:Q,removeNodes:v,removeEdges:z,findNode:l,findEdge:c,updateEdge:k,applyEdgeChanges:F,applyNodeChanges:P,addSelectedElements:b,addSelectedNodes:m,addSelectedEdges:g,setMinZoom:w,setMaxZoom:M,setTranslateExtent:y,setNodeExtent:B,removeSelectedElements:S,removeSelectedNodes:p,removeSelectedEdges:E,startConnection:R,updateConnection:$,endConnection:V,setInteractive:I,setState:H,getIntersectingNodes:te,isNodeIntersecting:C,fitView:async(x={padding:.1})=>{const{fitView:N}=await i();N(x)},zoomIn:async x=>{const{zoomIn:N}=await i();N(x)},zoomOut:async x=>{const{zoomOut:N}=await i();N(x)},zoomTo:async(x,N)=>{const{zoomTo:D}=await i();D(x,N)},setTransform:async(x,N)=>{const{setTransform:D}=await i();D(x,N)},getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),setCenter:async(x,N,D)=>{const{setCenter:L}=await i();L(x,N,D)},fitBounds:async(x,N)=>{const{fitBounds:D}=await i();D(x,N)},project:x=>lo(x,e.viewport,e.snapToGrid,e.snapGrid),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes,edges:e.edges,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),updateNodeInternals:n,$reset:()=>{H(li())},$destroy:()=>{}}}const Fe=class{constructor(){Zt(this,"currentId",0);Zt(this,"flows",new Map)}static getInstance(){return Fe.instance||(Fe.instance=new Fe),Fe.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=li(n),i=r.reactive(o),a=il(i),s=jc(i,a),l={};Object.entries(i.hooks).forEach(([d,h])=>{const f=`on${d.charAt(0).toUpperCase()+d.slice(1)}`;l[f]=h.on});const c={};Object.entries(i.hooks).forEach(([d,h])=>{c[d]=h.trigger}),s.setState(i),n&&(n.modelValue&&s.setElements(n.modelValue),n.nodes&&s.setNodes(n.nodes),n.edges&&s.setEdges(n.edges));const u={...l,...a,...s,...r.toRefs(i),emits:c,id:t,$destroy:()=>{this.remove(t)}};return this.set(t,u),u}getId(){return`vue-flow-${this.currentId++}`}};let ct=Fe;Zt(ct,"instance");const ne=e=>{const t=ct.getInstance(),n=r.getCurrentScope(),o=e==null?void 0:e.id,i=(n==null?void 0:n.vueFlowId)||o;let a,s=!1;if(n){const l=r.inject(rn,null);typeof l<"u"&&l!==null&&(a=l)}if(a||i&&(a=t.get(i)),!a||a&&o&&o!==a.id){const l=o!=null?o:t.getId();a=t.create(l,e),n&&(s=!0)}else e&&a.setState(e);if(!a)throw new Error("[vueflow]: store instance not found.");return n&&(r.provide(rn,a),n.vueFlowId=a.id,s&&He(()=>{t.get(a.id)&&a.$destroy(),a=null})),a},Qc=(e,t,n)=>{const o=r.effectScope();return o.run(()=>{[()=>{o.run(()=>{let m,g;const b=!!(e.modelValue&&e.modelValue.value);let p=!!(n.nodes.value.length||n.edges.value.length);m=Oe([e.modelValue,()=>{var E,S;return(S=(E=e.modelValue)==null?void 0:E.value)==null?void 0:S.length}],([E])=>{E&&Array.isArray(E)&&(g==null||g.pause(),n.setElements(E),!g&&!p&&E.length?p=!0:g==null||g.resume())},{immediate:b}),g=Oe([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([E,S])=>{var w;((w=e.modelValue)==null?void 0:w.value)&&Array.isArray(e.modelValue.value)&&(m==null||m.pause(),e.modelValue.value=[...E,...S],r.nextTick(()=>{m==null||m.resume()}))},{immediate:p}),r.onScopeDispose(()=>{m==null||m.stop(),g==null||g.stop()})})},()=>{o.run(()=>{let m,g;const b=!!(e.nodes&&e.nodes.value);let p=!!n.nodes.value.length;m=Oe([e.nodes,()=>{var E,S;return(S=(E=e.nodes)==null?void 0:E.value)==null?void 0:S.length}],([E])=>{E&&Array.isArray(E)&&(g==null||g.pause(),n.setNodes(E),!g&&!p&&E.length?p=!0:g==null||g.resume())},{immediate:b}),g=Oe([n.nodes,()=>n.nodes.value.length],([E])=>{var S;((S=e.nodes)==null?void 0:S.value)&&Array.isArray(e.nodes.value)&&(m==null||m.pause(),e.nodes.value=[...E],r.nextTick(()=>{m==null||m.resume()}))},{immediate:p}),r.onScopeDispose(()=>{m==null||m.stop(),g==null||g.stop()})})},()=>{o.run(()=>{let m,g;const b=!!(e.edges&&e.edges.value);let p=!!n.edges.value.length;m=Oe([e.edges,()=>{var E,S;return(S=(E=e.edges)==null?void 0:E.value)==null?void 0:S.length}],([E])=>{E&&Array.isArray(E)&&(g==null||g.pause(),n.setEdges(E),!g&&!p&&E.length?p=!0:g==null||g.resume())},{immediate:b}),g=Oe([n.edges,()=>n.edges.value.length],([E])=>{var S;((S=e.edges)==null?void 0:S.value)&&Array.isArray(e.edges.value)&&(m==null||m.pause(),e.edges.value=[...E],r.nextTick(()=>{m==null||m.resume()}))},{immediate:p}),r.onScopeDispose(()=>{m==null||m.stop(),g==null||g.stop()})})},()=>{o.run(()=>{r.watch(()=>t.minZoom,()=>{t.minZoom&&ie(t.minZoom)&&n.setMinZoom(t.minZoom)})})},()=>{o.run(()=>{r.watch(()=>t.maxZoom,()=>{t.maxZoom&&ie(t.maxZoom)&&n.setMaxZoom(t.maxZoom)})})},()=>{o.run(()=>{r.watch(()=>t.translateExtent,()=>{t.translateExtent&&ie(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)})})},()=>{o.run(()=>{r.watch(()=>t.nodeExtent,()=>{t.nodeExtent&&ie(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)})})},()=>{o.run(()=>{r.watch(()=>t.applyDefault,()=>{ie(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),r.watch(n.applyDefault,(m,g,b)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),b(()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)})},{immediate:!0})})},()=>{o.run(()=>{const m=async g=>{let b=g;pe(t.autoConnect)&&(b=await t.autoConnect(g)),b!==!1&&n.addEdges([b])};r.watch(()=>t.autoConnect,()=>{ie(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),r.watch(n.autoConnect,(g,b,p)=>{g?n.onConnect(m):n.hooks.value.connect.off(m),p(()=>{n.hooks.value.connect.off(m)})},{immediate:!0})})},()=>{const m=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(g=>{if(!m.includes(g)){const b=r.toRef(t,g),p=n[g];o.run(()=>{r.watch(b,E=>{ie(E)&&(p.value=E)},{flush:"pre"})})}})}].forEach(m=>m())}),()=>o.stop()};function Fi(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Jc={name:"Pane"},eu=r.defineComponent({...Jc,props:{isSelecting:{type:Boolean}},setup(e){const{id:t,vueFlowRef:n,getNodes:o,getEdges:i,viewport:a,emits:s,userSelectionActive:l,removeSelectedElements:c,panOnDrag:u,userSelectionRect:d,elementsSelectable:h,nodesSelectionActive:f,addSelectedElements:_,getSelectedEdges:m,removeNodes:g,removeEdges:b,selectionMode:p,deleteKeyCode:E,multiSelectionKeyCode:S,multiSelectionActive:w}=ne(),M=r.ref(null),y=r.ref(0),B=r.ref(0),I=r.ref(),A=r.computed(()=>h.value&&(e.isSelecting||l.value));je(E,R=>{if(!R)return;const $=o.value.reduce((V,Z)=>((!Z.selected&&Z.parentNode&&V.find(te=>te.id===Z.parentNode)||Z.selected)&&V.push(Z),V),[]);($||m.value)&&(m.value.length>0&&b(m.value),$.length>0&&g($),f.value=!1,c())}),je(S,R=>{w.value=R});function T(){l.value=!1,d.value=null,y.value=0,B.value=0}function G(R){R.target!==M.value||A.value||(s.paneClick(R),c(),f.value=!1)}function X(R){var $;if(R.target===M.value){if(Array.isArray(u.value)&&(($=u.value)==null?void 0:$.includes(2))){R.preventDefault();return}s.paneContextMenu(R)}}function Q(R){R.target===M.value&&s.paneScroll(R)}function v(R){if(I.value=n.value.getBoundingClientRect(),!A.value||!h||!e.isSelecting||R.button!==0||R.target!==M.value||!I.value)return;const{x:$,y:V}=Fi(R,I.value);c(),d.value={width:0,height:0,startX:$,startY:V,x:$,y:V},l.value=!0,s.selectionStart(R)}function z(R){var U,x;if(!e.isSelecting||!I.value||!d.value)return;if(!A.value)return s.paneMouseMove(R);l.value||(l.value=!0),f.value&&(f.value=!1);const $=Fi(R,I.value),V=(U=d.value.startX)!=null?U:0,Z=(x=d.value.startY)!=null?x:0,te={...d.value,x:$.x<V?$.x:V,y:$.y<Z?$.y:Z,width:Math.abs($.x-V),height:Math.abs($.y-Z)},C=nn(o.value,d.value,a.value,p.value===yt.Partial),H=Ze(C,i.value);y.value=C.length,B.value=H.length,d.value=te,_([...C,...H])}function k(R){!A.value||(!l.value&&d.value&&R.target===M.value&&G(R),f.value=y.value>0,T(),s.selectionEnd(R))}function P(R){var $;if(!A.value)return s.paneMouseLeave(R);l.value&&(f.value=y.value>0,($=s.selectionEnd)==null||$.call(s,R)),T()}function F(R){A.value||s.paneMouseEnter(R)}return(R,$)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"container",ref:M,key:`pane-${r.unref(t)}`,class:r.normalizeClass(["vue-flow__pane vue-flow__container",[{selection:e.isSelecting}]]),onClick:G,onContextmenu:X,onWheel:Q,onMouseenter:F,onMousedown:v,onMousemove:z,onMouseup:k,onMouseleave:P},[r.renderSlot(R.$slots,"default"),r.unref(l)&&r.unref(d)?(r.openBlock(),r.createBlock(nl,{key:0})):r.createCommentVNode("",!0),r.unref(f)?(r.openBlock(),r.createBlock(tl,{key:1})):r.createCommentVNode("",!0)],34))}}),tu={class:"vue-flow__nodes vue-flow__container"},nu={name:"Nodes"},ou=r.defineComponent({...nu,setup(e){const t=r.inject(vt),n=ne(),o=r.toRef(n,"nodesDraggable"),i=r.toRef(n,"nodesFocusable"),a=r.toRef(n,"elementsSelectable"),s=r.toRef(n,"nodesConnectable"),l=r.toRef(n,"getNodes"),c=r.toRef(n,"getNodeTypes"),u=r.toRef(n,"updateNodeDimensions"),d=r.toRef(n,"emits"),h=p=>typeof p>"u"?o.value:p,f=p=>typeof p>"u"?a.value:p,_=p=>typeof p>"u"?s.value:p,m=p=>typeof p>"u"?i.value:p,g=r.ref();r.onMounted(()=>{const p=[];let E=!1;const S=w=>{p.push(w),p.length===l.value.length&&r.nextTick(()=>{E=!0,d.value.nodesInitialized()})};g.value=new ResizeObserver(w=>{const M=w.map(y=>{const B=y.target.getAttribute("data-id");return E||S(B),{id:B,nodeElement:y.target}});u.value(M)})}),r.onBeforeUnmount(()=>{var p;return(p=g.value)==null?void 0:p.disconnect()});const b=(p,E)=>{const S=p||"default";let w=E!=null?E:c.value[S];const M=r.getCurrentInstance();if(typeof w=="string"&&M){const B=Object.keys(M.appContext.components);B&&B.includes(S)&&(w=r.resolveComponent(S,!1))}if(typeof w!="string")return w;const y=t==null?void 0:t[`node-${S}`];return y!=null&&y({})?y:(ae(`Node type "${p}" not found and no node-slot detected. Using fallback type "default".`),!1)};return(p,E)=>(r.openBlock(),r.createElementBlock("div",tu,[g.value?(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:0},r.renderList(l.value,S=>(r.openBlock(),r.createBlock(r.unref(Bs),{id:S.id,key:S.id,"resize-observer":g.value,type:b(S.type,S.template),name:S.type||"default",draggable:h(S.draggable),selectable:f(S.selectable),connectable:_(S.connectable),focusable:m(S.focusable),node:S},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):r.createCommentVNode("",!0)]))}}),iu=["id","markerWidth","markerHeight","markerUnits","orient"],ru=["stroke","stroke-width","fill"],au=["stroke","stroke-width"],su={name:"MarkerType"},lu=r.defineComponent({...su,props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(r.openBlock(),r.createElementBlock("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type==="arrowclosed"?(r.openBlock(),r.createElementBlock("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,ru)):r.createCommentVNode("",!0),e.type==="arrow"?(r.openBlock(),r.createElementBlock("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,au)):r.createCommentVNode("",!0)],8,iu))}}),cu={name:"MarkerDefinitions"},uu=r.defineComponent({...cu,setup(e){const t=ne(),n=r.toRef(t,"id"),o=r.toRef(t,"edges"),i=r.toRef(t,"connectionLineOptions"),a=r.toRef(t,"defaultMarkerColor"),s=r.computed(()=>{const l=[],c=[],u=d=>{if(d){const h=Ne(d,n.value);l.includes(h)||(typeof d=="object"?c.push({...d,id:h,color:d.color||a.value}):c.push({id:h,color:a.value,type:d}),l.push(h))}};return[i.value.markerEnd,i.value.markerStart].forEach(u),o.value.reduce((d,h)=>([h.markerStart,h.markerEnd].forEach(u),d.sort((f,_)=>f.id.localeCompare(_.id))),c),c});return(l,c)=>(r.openBlock(),r.createElementBlock("defs",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(s),u=>(r.openBlock(),r.createBlock(lu,{id:u.id,key:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,"stroke-width":u.strokeWidth,orient:u.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),du={key:0,class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},fu={name:"Edges"},hu=r.defineComponent({...fu,setup(e){const t=r.inject(vt),n=ne();r.toRef(n,"emits"),r.toRef(n,"connectionMode"),r.toRef(n,"edgeUpdaterRadius");const o=r.toRef(n,"onPaneReady"),i=r.toRef(n,"connectionStartHandle"),a=r.toRef(n,"nodesConnectable"),s=r.toRef(n,"edgesUpdatable");r.toRef(n,"edgesFocusable");const l=r.toRef(n,"elementsSelectable"),c=r.toRef(n,"getSelectedNodes"),u=r.toRef(n,"getSelectedEdges");r.toRef(n,"nodesSelectionActive");const d=r.toRef(n,"getNode");r.toRef(n,"getNodes");const h=r.toRef(n,"getEdges"),f=r.toRef(n,"getEdgeTypes");r.toRef(n,"addSelectedEdges");const _=r.toRef(n,"noPanClassName"),m=r.toRef(n,"elevateEdgesOnSelect"),g=B=>typeof B>"u"?l.value:B,b=B=>typeof B>"u"?s.value:B,p=Gn(()=>{var B;return(B=i.value)==null?void 0:B.nodeId},()=>{var B;return(B=i.value)!=null&&B.nodeId?d.value(i.value.nodeId):!1}),E=Gn(()=>{var B;return(B=i.value)==null?void 0:B.nodeId},()=>{var B,I;return!!(p.value&&(typeof p.value.connectable>"u"?a.value:p.value.connectable)&&((B=i.value)==null?void 0:B.nodeId)&&((I=i.value)==null?void 0:I.type))});let S=r.ref([]),w=r.effectScope();o.value(()=>{w||(w=r.effectScope()),w.run(()=>{r.watch([c,h,()=>m.value?u.value:[]],()=>{m.value?r.nextTick(()=>S.value=Xs(h.value,d.value)):S.value=[{isMaxLevel:!0,edges:h.value,level:0}]},{immediate:!0})})}),r.onBeforeUnmount(()=>{w==null||w.stop(),w=null});const M=(B,I)=>{const A=B||"default";let T=I!=null?I:f.value[A];const G=r.getCurrentInstance();if(typeof T=="string"&&G){const Q=Object.keys(G.appContext.components);Q&&Q.includes(A)&&(T=r.resolveComponent(A,!1))}if(T&&typeof T!="string")return T;const X=t==null?void 0:t[`edge-${A}`];return X!=null&&X({})?X:(ae(`Edge type "${B}" not found and no edge-slot detected. Using fallback type "default".`),!1)},y=B=>{const I=B.class instanceof Function?B.class(B):B.class;return[_.value,I]};return(B,I)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(S.value,A=>(r.openBlock(),r.createElementBlock("svg",{key:A.level,class:"vue-flow__edges vue-flow__container",style:r.normalizeStyle(`z-index: ${A.level}`)},[A.isMaxLevel?(r.openBlock(),r.createBlock(uu,{key:0})):r.createCommentVNode("",!0),r.createElementVNode("g",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(A.edges,T=>(r.openBlock(),r.createBlock(r.unref(Zs),{id:T.id,key:T.id,edge:T,type:M(T.type,T.template),name:T.type||"default","source-node":d.value(T.source),"target-node":d.value(T.target),selectable:g(T.selectable),updatable:b(T.updatable),class:r.normalizeClass(y(T))},null,8,["id","edge","type","name","source-node","target-node","selectable","updatable","class"]))),128))])],4))),128)),E.value&&!!p.value?(r.openBlock(),r.createElementBlock("svg",du,[r.createVNode(Qs,{"source-node":p.value},null,8,["source-node"])])):r.createCommentVNode("",!0)],64))}}),gu=r.createElementVNode("div",{class:"vue-flow__edge-labels"},null,-1),mu={name:"Transform"},pu=r.defineComponent({...mu,setup(e){const{id:t,viewport:n,dimensions:o,fitViewOnInit:i,emits:a,fitView:s,...l}=ne(),c=async d=>{const h=Xe();return"screen"in h&&await $e(d).toMatch(({height:f,width:_})=>!isNaN(_)&&_>0&&!isNaN(f)&&f>0),!0};let u=r.ref(!1);return r.onMounted(async()=>{await c(o.value),u.value=!0,a.paneReady({id:t,viewport:n,dimensions:o,fitViewOnInit:i,fitView:s,emits:a,...l}),i!=null&&i.value&&s()}),(d,h)=>(r.openBlock(),r.createElementBlock("div",{key:`transform-${r.unref(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:r.normalizeStyle({transform:`translate(${r.unref(n).x}px,${r.unref(n).y}px) scale(${r.unref(n).zoom})`,opacity:u.value?void 0:0})},[r.createVNode(hu),gu,r.createVNode(ou),r.renderSlot(d.$slots,"default")],4))}}),yu={name:"Viewport"},vu=r.defineComponent({...yu,setup(e){const t=ne(),n=r.toRef(t,"id"),o=r.toRef(t,"minZoom"),i=r.toRef(t,"maxZoom"),a=r.toRef(t,"defaultViewport"),s=r.toRef(t,"translateExtent"),l=r.toRef(t,"dimensions"),c=r.toRef(t,"zoomActivationKeyCode"),u=r.toRef(t,"selectionKeyCode"),d=r.toRef(t,"panActivationKeyCode"),h=r.toRef(t,"panOnScroll"),f=r.toRef(t,"panOnScrollMode"),_=r.toRef(t,"panOnScrollSpeed"),m=r.toRef(t,"panOnDrag"),g=r.toRef(t,"zoomOnDoubleClick"),b=r.toRef(t,"zoomOnPinch"),p=r.toRef(t,"zoomOnScroll"),E=r.toRef(t,"preventScrolling"),S=r.toRef(t,"noWheelClassName"),w=r.toRef(t,"noPanClassName"),M=r.toRef(t,"setState"),y=r.toRef(t,"emits"),B=r.toRef(t,"connectionStartHandle"),I=r.toRef(t,"userSelectionActive"),A=r.toRef(t,"paneDragging"),T=r.ref();let G=r.ref(!1),X=r.ref(!1),Q=r.ref(!1);const v=(C,H)=>H===2&&Array.isArray(C)&&C.includes(2),z=je(d.value),k=r.computed(()=>!!B.value),P=r.computed(()=>!G.value&&m.value&&z.value),F=r.computed(()=>u.value!==!0&&G.value||u.value===!0&&P.value!==!0),R=(C,H)=>C.x!==H.x&&!isNaN(H.x)||C.y!==H.y&&!isNaN(H.y)||C.zoom!==H.k&&!isNaN(H.k),$=C=>({x:C.x,y:C.y,zoom:C.k}),V=()=>{if(!T.value)return;const{width:C,height:H}=dt(T.value);l.value.width=C,l.value.height=H},Z=(C,H)=>C.target.closest(`.${H}`);let te=r.ref({x:0,y:0,zoom:0});return r.onMounted(()=>{dr(T,V);const C=Xe();Gt(C,"resize",V)}),r.onMounted(()=>{const C=T.value,H=C.getBoundingClientRect(),U=Gc().scaleExtent([o.value,i.value]).translateExtent(s.value),x=ce(C).call(U),N=x.on("wheel.zoom"),D=Ht.translate(a.value.x,a.value.y).scale(ft(a.value.zoom,o.value,i.value)),L=[[0,0],[H.width,H.height]],j=U.constrain()(D,L,s.value);U.transform(x,j),M.value({d3Zoom:U,d3Selection:x,d3ZoomHandler:N,viewport:{x:D.x,y:D.y,zoom:D.k},viewportRef:C});const K=O=>{G.value=O,O&&I.value&&!X.value?U.on("zoom",null):!O&&!I.value&&U.on("zoom",J=>{var re;M.value({viewport:{x:J.transform.x,y:J.transform.y,zoom:J.transform.k}});const oe=$(J.transform);Q.value=v(m.value,(re=J.sourceEvent)==null?void 0:re.button),y.value.viewportChange(oe),y.value.move({event:J,flowTransform:oe})})};je(u.value,K),K(!1);const ee=je(c.value);U.on("start",O=>{var oe;if(!O.sourceEvent)return null;X.value=!0;const J=$(O.transform);((oe=O.sourceEvent)==null?void 0:oe.type)==="mousedown"&&M.value({paneDragging:!0}),te.value=J,y.value.viewportChangeStart(J),y.value.moveStart({event:O,flowTransform:J})}),U.on("end",O=>{var J;if(!O.sourceEvent)return null;if(X.value=!1,M.value({paneDragging:!1}),v(m.value,(J=O.sourceEvent)==null?void 0:J.button)&&!Q.value&&y.value.paneContextMenu(O.sourceEvent),Q.value=!1,R(te.value,O.transform)){const oe=$(O.transform);te.value=oe,y.value.viewportChangeEnd(oe),y.value.moveEnd({event:O,flowTransform:oe})}}),r.watchEffect(()=>{h.value&&!ee.value&&!I.value?x.on("wheel",O=>{if(Z(O,S.value))return!1;O.preventDefault(),O.stopImmediatePropagation();const J=x.property("__zoom").k||1;if(O.ctrlKey&&b.value){const Xt=he(O),Cu=-O.deltaY*(O.deltaMode===1?.05:O.deltaMode?1:.002)*10,$u=J*2**Cu;U.scaleTo(x,$u,Xt);return}const oe=O.deltaMode===1?20:1,re=f.value===Ke.Vertical?0:O.deltaX*oe,Yt=f.value===Ke.Horizontal?0:O.deltaY*oe;U.translateBy(x,-(re/J)*_.value,-(Yt/J)*_.value)}).on("wheel.zoom",null):typeof N<"u"&&x.on("wheel",O=>{if(!E.value||Z(O,S.value))return null;O.preventDefault()}).on("wheel.zoom",N)}),U.filter(O=>{var Yt,Xt;const J=ee.value||p.value,oe=b.value&&O.ctrlKey;if(O.button===1&&O.type==="mousedown"&&(((Yt=O.target)==null?void 0:Yt.closest(".vue-flow__node"))||((Xt=O.target)==null?void 0:Xt.closest(".vue-flow__edge"))))return!0;if(!m.value&&!J&&!h.value&&!g.value&&!b.value||I.value||!g.value&&O.type==="dblclick"||Z(O,S.value)&&O.type==="wheel"||Z(O,w.value)&&O.type!=="wheel"||!b.value&&O.ctrlKey&&O.type==="wheel"||!J&&!h.value&&!oe&&O.type==="wheel"||!m.value&&(O.type==="mousedown"||O.type==="touchstart")||Array.isArray(m.value)&&!m.value.includes(O.button)&&(O.type==="mousedown"||O.type==="touchstart"))return!1;const re=Array.isArray(m.value)&&m.value.includes(O.button)||!O.button||O.button<=1;return(!O.ctrlKey||O.type==="wheel")&&re})}),(C,H)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"viewportEl",ref:T,key:`viewport-${n.value}`,class:"vue-flow__viewport vue-flow__container"},[r.createVNode(eu,{"is-selecting":r.unref(F),class:r.normalizeClass({connecting:k.value,dragging:A.value,draggable:!!m.value})},{default:r.withCtx(()=>[r.createVNode(pu,null,{default:r.withCtx(()=>[r.renderSlot(C.$slots,"zoom-pane")]),_:3})]),_:3},8,["is-selecting","class"]),r.renderSlot(C.$slots,"default")]))}}),wu=["id"],xu=["id"],_u=["id"],bu=r.defineComponent({__name:"A11yDescriptions",setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=ne(),i={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"};return(a,s)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[r.createElementVNode("div",{id:`${r.unref(Fo)}-${r.unref(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+r.toDisplayString(r.unref(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,wu),r.createElementVNode("div",{id:`${r.unref(Ho)}-${r.unref(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,xu),r.unref(n)?r.createCommentVNode("",!0):(r.openBlock(),r.createElementBlock("div",{key:0,id:`${r.unref(Cs)}-${r.unref(t)}`,"aria-live":"assertive","aria-atomic":"true",style:i},r.toDisplayString(r.unref(o)),9,_u))],64))}}),Eu={name:"VueFlow"},Nu=r.defineComponent({...Eu,props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:null,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,panActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:null,maxZoom:null,defaultViewport:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:null,edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},__experimentalFeatures:null},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=Ye(o,"modelValue",n),a=Ye(o,"nodes",n),s=Ye(o,"edges",n),{vueFlowRef:l,id:c,hooks:u,getNodeTypes:d,getEdgeTypes:h,$reset:f,..._}=ne(o),m=Qc({modelValue:i,nodes:a,edges:s},o,{vueFlowRef:l,id:c,hooks:u,getNodeTypes:d,getEdgeTypes:h,$reset:f,..._}),g=r.ref();return r.onUnmounted(()=>{m()}),r.onMounted(()=>{l.value=g.value}),yr(n,u),r.provide(vt,r.useSlots()),t({vueFlowRef:l,id:c,hooks:u,getNodeTypes:d,getEdgeTypes:h,$reset:f,..._}),(b,p)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"el",ref:g,class:"vue-flow"},[r.createVNode(vu,null,{nodes:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(d)),E=>r.renderSlot(b.$slots,`node-${E}`)),256))]),edges:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(h)),E=>r.renderSlot(b.$slots,`edge-${E}`)),256))]),"connection-name":r.withCtx(()=>[r.renderSlot(b.$slots,"connection-line")]),"zoom-pane":r.withCtx(()=>[r.renderSlot(b.$slots,"zoom-pane")]),default:r.withCtx(()=>[r.renderSlot(b.$slots,"default")]),_:3}),r.createVNode(bu)],512))}}),Su=r.defineComponent({__name:"Panel",props:{position:null},setup(e){const t=e,{userSelectionActive:n}=ne(),o=r.computed(()=>`${t.position}`.split("-"));return(i,a)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(["vue-flow__panel",r.unref(o)]),style:r.normalizeStyle({pointerEvents:r.unref(n)?"none":"all"})},[r.renderSlot(i.$slots,"default")],6))}});function ku(e){const t=e!=null?e:r.inject(yo,""),n=r.inject(vo,null),{findEdge:o}=ne(),i=o(t);if(!i)throw new Error(`[vue-flow]: useEdge - Edge with id ${t} not found!`);return{id:t,edge:i,edgeEl:n}}return W.BaseEdge=Qe,W.BezierEdge=Go,W.ConnectionLineType=Se,W.ConnectionMode=Me,W.EdgeLabelRenderer=Gs,W.EdgeText=Xo,W.GlobalVueFlowStorage=ct,W.Handle=Ge,W.MarkerType=go,W.NodeIdInjection=an,W.PanOnScrollMode=Ke,W.Panel=Su,W.PanelPosition=mo,W.Position=q,W.SelectionMode=yt,W.SimpleBezierEdge=qo,W.SmoothStepEdge=Sn,W.StepEdge=Jo,W.StraightEdge=ti,W.VueFlow=Nu,W.VueFlowInjection=rn,W.addEdge=Er,W.applyChanges=lt,W.applyEdgeChanges=Uc,W.applyNodeChanges=qc,W.connectionExists=mt,W.defaultEdgeTypes=si,W.defaultNodeTypes=ai,W.getBezierPath=xn,W.getBoundsofRects=Sr,W.getConnectedEdges=Ze,W.getIncomers=br,W.getMarkerId=Ne,W.getNodesInside=nn,W.getOutgoers=_r,W.getRectOfNodes=tn,W.getSimpleBezierPath=bn,W.getSmoothStepPath=Ct,W.getStraightPath=ei,W.getTransformForBounds=on,W.graphPosToZoomedPos=kr,W.isEdge=fe,W.isNode=ht,W.updateEdge=Nr,W.useEdge=ku,W.useGetPointerPosition=bo,W.useHandle=sn,W.useNode=wo,W.useVueFlow=ne,W.useZoomPanHelper=Di,Object.defineProperties(W,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),W}({},Vue);
